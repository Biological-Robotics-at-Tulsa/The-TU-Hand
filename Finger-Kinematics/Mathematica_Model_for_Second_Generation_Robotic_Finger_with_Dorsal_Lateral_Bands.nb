(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    104408,       2547]
NotebookOptionsPosition[     98683,       2365]
NotebookOutlinePosition[     99299,       2387]
CellTagsIndexPosition[     99256,       2384]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Finger Kinematics: Dorsal Bands", "Title",
 CellChangeTimes->{{3.693653492828445*^9, 3.693653495316694*^9}, {
  3.698080013950338*^9, 3.6980800159235353`*^9}}],

Cell["Version 2", "Subtitle",
 CellChangeTimes->{{3.6936534984210043`*^9, 3.6936535066768293`*^9}}],

Cell[CellGroupData[{

Cell["Information", "Section",
 CellChangeTimes->{{3.6936536740605664`*^9, 3.6936536755957203`*^9}, {
  3.6980833378286924`*^9, 3.6980833393888483`*^9}}],

Cell["\<\
Author: Nathanael J. Rake
Date: 17 January 2017
Purpose: To compute the finger kinematics for an anthropomorphic, tendon \
driven, robotic finger.\
\>", "Text",
 CellChangeTimes->{{3.6936536792040806`*^9, 3.6936537739045496`*^9}, {
  3.6936787823712215`*^9, 3.693678848477832*^9}, {3.695491016980872*^9, 
  3.6954910217533493`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Clear Variables", "Section",
 CellChangeTimes->{{3.6954797340036354`*^9, 3.695479740211256*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"ClearAll", "[", "\"\<Global`*\>\"", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.6954797417374086`*^9, 3.695479750070242*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Import", "Section",
 CellChangeTimes->{{3.6936799733193045`*^9, 3.693679974589432*^9}, {
   3.6936826950534697`*^9, 3.69368269675764*^9}, 3.6954910103962135`*^9}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"<<", "\"\<extraFunctions.m\>\""}]}], "Input",
 CellChangeTimes->{{3.695480585462773*^9, 3.6954806019544215`*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Denavit-Hartenburg Parameters", "Section",
 CellChangeTimes->{{3.610972738187995*^9, 3.6109727531018486`*^9}, {
   3.610972852312523*^9, 3.61097285313757*^9}, {3.6109729129129887`*^9, 
   3.610972913738036*^9}, {3.610973534778558*^9, 3.6109735719956865`*^9}, {
   3.6109736406196117`*^9, 3.6109736560444937`*^9}, {3.61097405810149*^9, 
   3.610974082984913*^9}, {3.6109741492357025`*^9, 3.6109741504587727`*^9}, {
   3.6109758802797127`*^9, 3.610975910525443*^9}, {3.610980990681819*^9, 
   3.6109809914948654`*^9}, {3.610981298191407*^9, 3.6109813404878263`*^9}, {
   3.610981372991686*^9, 3.6109814313700247`*^9}, {3.6109816670795064`*^9, 
   3.610981668819606*^9}, {3.6109817260768805`*^9, 3.6109817269129286`*^9}, {
   3.6109821248116875`*^9, 3.6109821256637363`*^9}, {3.6109826818875504`*^9, 
   3.610982682814603*^9}, {3.610983065392485*^9, 3.610983104674732*^9}, {
   3.6109831440699854`*^9, 3.61098315883683*^9}, {3.6116841366303663`*^9, 
   3.611684168389542*^9}, 3.6153100520953465`*^9, {3.642870257834301*^9, 
   3.642870313651882*^9}, {3.657021791488703*^9, 3.657021793719926*^9}}],

Cell[CellGroupData[{

Cell["Joint Angles", "Subsection",
 CellChangeTimes->{{3.6630900591267242`*^9, 3.6630900610619173`*^9}}],

Cell[BoxData[{
 RowBox[{"\[Theta]mpa", ";"}], "\[IndentingNewLine]", 
 RowBox[{"\[Theta]mpf", ";"}], "\[IndentingNewLine]", 
 RowBox[{"\[Theta]pip", ";"}], "\[IndentingNewLine]", 
 RowBox[{"\[Theta]dip", ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"\[Theta]5", " ", "=", " ", "0"}], ";"}], " ", 
  RowBox[{"(*", 
   RowBox[{"Contact", " ", 
    RowBox[{"frame", ".", " ", "Should"}], " ", "always", " ", "remain", " ", 
    "as", " ", "0"}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.610972738187995*^9, 3.6109727531018486`*^9}, {
   3.610972852312523*^9, 3.61097285313757*^9}, {3.6109729129129887`*^9, 
   3.610972913738036*^9}, {3.610973534778558*^9, 3.6109735719956865`*^9}, {
   3.6109736406196117`*^9, 3.6109736560444937`*^9}, {3.61097405810149*^9, 
   3.610974082984913*^9}, {3.6109741492357025`*^9, 3.6109741504587727`*^9}, {
   3.6109758802797127`*^9, 3.610975910525443*^9}, {3.610980990681819*^9, 
   3.6109809914948654`*^9}, {3.610981298191407*^9, 3.6109813404878263`*^9}, {
   3.610981372991686*^9, 3.6109814313700247`*^9}, {3.6109816670795064`*^9, 
   3.610981668819606*^9}, {3.6109817260768805`*^9, 3.6109817269129286`*^9}, {
   3.6109821248116875`*^9, 3.6109821256637363`*^9}, {3.6109826818875504`*^9, 
   3.610982682814603*^9}, {3.610983065392485*^9, 3.610983104674732*^9}, {
   3.6109831440699854`*^9, 3.61098315883683*^9}, {3.6116841366303663`*^9, 
   3.611684168389542*^9}, 3.6153100520953465`*^9, {3.642870257834301*^9, 
   3.642870287059223*^9}, {3.642870362022719*^9, 3.642870389518468*^9}, {
   3.642870507577273*^9, 3.642870507581273*^9}, 3.6428706048139954`*^9, {
   3.6630900526720786`*^9, 3.663090054557267*^9}, {3.68174454450206*^9, 
   3.6817445490445147`*^9}, {3.6817453703286343`*^9, 3.6817453712957315`*^9}, 
   3.68174821141405*^9, 3.681748343534837*^9}]
}, Closed]],

Cell[CellGroupData[{

Cell["Link Offset", "Subsection",
 CellChangeTimes->{{3.610972763322433*^9, 3.610972766558618*^9}, {
  3.6109736594646893`*^9, 3.6109736671151266`*^9}, {3.610973731144789*^9, 
  3.610973732529868*^9}, {3.6109759130595875`*^9, 3.610975936612935*^9}, {
  3.610980997240194*^9, 3.6109809980212383`*^9}, {3.6109814341241817`*^9, 
  3.6109814402465324`*^9}, {3.663090069640775*^9, 3.6630900828470955`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"d1", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"d2", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"d3", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"d4", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"d5", " ", "=", " ", "0"}], ";"}]}], "Input",
 CellChangeTimes->{{3.610972763322433*^9, 3.610972766558618*^9}, {
  3.6109736594646893`*^9, 3.6109736671151266`*^9}, {3.610973731144789*^9, 
  3.610973732529868*^9}, {3.6109759130595875`*^9, 3.610975936612935*^9}, {
  3.610980997240194*^9, 3.6109809980212383`*^9}, {3.6109814341241817`*^9, 
  3.6109814402465324`*^9}, {3.663090069640775*^9, 3.6630900730631175`*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Link Lengths", "Subsection",
 CellChangeTimes->{{3.610972768570733*^9, 3.610972777726257*^9}, {
   3.6109736698542833`*^9, 3.6109736742585354`*^9}, {3.6109759402511425`*^9, 
   3.6109759461894827`*^9}, {3.610976302918886*^9, 3.61097633008444*^9}, {
   3.6109764169174066`*^9, 3.610976419163535*^9}, {3.6109765264706726`*^9, 
   3.61097652956985*^9}, {3.6109810055076666`*^9, 3.6109810060006948`*^9}, {
   3.6109814427996783`*^9, 3.6109814535232916`*^9}, {3.611684176429346*^9, 
   3.6116841865813613`*^9}, {3.642869674374961*^9, 3.642869694158939*^9}, {
   3.6429549918455505`*^9, 3.6429549949531937`*^9}, {3.642955048762755*^9, 
   3.6429550534991145`*^9}, {3.642955095589106*^9, 3.6429550974824514`*^9}, 
   3.6437331942283287`*^9, {3.643733249486275*^9, 3.6437332495822563`*^9}, {
   3.6439809416676903`*^9, 3.643980970387562*^9}, {3.6439810104375668`*^9, 
   3.643981017885311*^9}, {3.6441571964634066`*^9, 3.644157197487509*^9}, {
   3.644157281834943*^9, 3.644157286058365*^9}, {3.6441573184916077`*^9, 
   3.6441573197397327`*^9}, {3.6441573664624043`*^9, 
   3.6441573670454626`*^9}, {3.6490075902967796`*^9, 
   3.6490075911028605`*^9}, {3.6490076345582056`*^9, 
   3.6490076643411837`*^9}, {3.649007739894738*^9, 3.6490077407688255`*^9}, {
   3.6490936104734173`*^9, 3.649093636524022*^9}, {3.6490936973291025`*^9, 
   3.6490937015425234`*^9}, {3.661022435372552*^9, 3.6610224904280567`*^9}, 
   3.661529277468048*^9, {3.6630900874655576`*^9, 3.663090093911202*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"a0", "=", "2.8750"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a1", "=", "0.5"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a2", "=", "1.75"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a3", "=", "1.25"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"a4", "=", "1.25"}], ";"}]}], "Input",
 CellChangeTimes->{{3.610972768570733*^9, 3.610972777726257*^9}, {
   3.6109736698542833`*^9, 3.6109736742585354`*^9}, {3.6109759402511425`*^9, 
   3.6109759461894827`*^9}, {3.610976302918886*^9, 3.61097633008444*^9}, {
   3.6109764169174066`*^9, 3.610976419163535*^9}, {3.6109765264706726`*^9, 
   3.61097652956985*^9}, {3.6109810055076666`*^9, 3.6109810060006948`*^9}, {
   3.6109814427996783`*^9, 3.6109814535232916`*^9}, {3.611684176429346*^9, 
   3.6116841865813613`*^9}, {3.642869674374961*^9, 3.642869694158939*^9}, {
   3.6429549918455505`*^9, 3.6429549949531937`*^9}, {3.642955048762755*^9, 
   3.6429550534991145`*^9}, {3.642955095589106*^9, 3.6429550974824514`*^9}, 
   3.6437331942283287`*^9, {3.643733249486275*^9, 3.6437332495822563`*^9}, {
   3.6439809416676903`*^9, 3.643980970387562*^9}, {3.6439810104375668`*^9, 
   3.643981017885311*^9}, {3.6441571964634066`*^9, 3.644157197487509*^9}, {
   3.644157281834943*^9, 3.644157286058365*^9}, {3.6441573184916077`*^9, 
   3.6441573197397327`*^9}, {3.6441573664624043`*^9, 
   3.6441573670454626`*^9}, {3.6490075902967796`*^9, 
   3.6490075911028605`*^9}, {3.6490076345582056`*^9, 
   3.6490076643411837`*^9}, {3.649007739894738*^9, 3.6490077407688255`*^9}, {
   3.6490936104734173`*^9, 3.649093636524022*^9}, {3.6490936973291025`*^9, 
   3.6490937015425234`*^9}, {3.661022435372552*^9, 3.6610224904280567`*^9}, 
   3.661529277468048*^9, {3.6630900874655576`*^9, 3.6630900904158525`*^9}, {
   3.6676488878955784`*^9, 3.667648953106099*^9}, {3.667663260598752*^9, 
   3.6676632974654384`*^9}, {3.6817445627178817`*^9, 3.681744604615071*^9}, {
   3.693654368387992*^9, 3.6936543750446577`*^9}, {3.697043536400049*^9, 
   3.69704353731114*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Link Twists", "Subsection",
 CellChangeTimes->{{3.610972783074563*^9, 3.6109728242789197`*^9}, {
   3.610973878292206*^9, 3.6109738869166985`*^9}, {3.610974208955118*^9, 
   3.6109742185636683`*^9}, {3.6109765334810734`*^9, 
   3.6109765468548384`*^9}, {3.6109766013639565`*^9, 3.6109766080853405`*^9}, 
   3.610981367766387*^9, {3.6109814574305153`*^9, 3.610981467337082*^9}, 
   3.642870629991513*^9, 3.644862972618389*^9, {3.663090252049014*^9, 
   3.6630902611429234`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"alpha0", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"alpha1", " ", "=", " ", 
   RowBox[{
    RowBox[{"-", "90"}], "Degree"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"alpha2", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"alpha3", " ", "=", " ", "0"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"alpha4", " ", "=", " ", "0"}], ";"}]}], "Input",
 CellChangeTimes->{{3.610972783074563*^9, 3.6109728242789197`*^9}, {
   3.610973878292206*^9, 3.6109738869166985`*^9}, {3.610974208955118*^9, 
   3.6109742185636683`*^9}, {3.6109765334810734`*^9, 
   3.6109765468548384`*^9}, {3.6109766013639565`*^9, 3.6109766080853405`*^9}, 
   3.610981367766387*^9, {3.6109814574305153`*^9, 3.610981467337082*^9}, 
   3.642870629991513*^9, 3.644862972618389*^9, {3.663090252049014*^9, 
   3.663090255351344*^9}}]
}, Closed]]
}, Closed]],

Cell[CellGroupData[{

Cell["Homogeneous Transformation Matrices", "Section",
 CellChangeTimes->{{3.610972783074563*^9, 3.6109728242789197`*^9}, {
   3.610973878292206*^9, 3.6109738869166985`*^9}, {3.610974208955118*^9, 
   3.6109742185636683`*^9}, {3.6109765334810734`*^9, 
   3.6109765468548384`*^9}, {3.6109766013639565`*^9, 3.6109766080853405`*^9}, 
   3.610981367766387*^9, {3.6109814574305153`*^9, 3.610981467337082*^9}, {
   3.642870629991513*^9, 3.64287064226374*^9}, {3.657021754687023*^9, 
   3.6570217634549*^9}}],

Cell[CellGroupData[{

Cell["Transform Function", "Subsection",
 CellChangeTimes->{{3.6570449625986853`*^9, 3.6570449766630917`*^9}}],

Cell["\<\
Returns the transform from one frame to another based on the DH parameters\
\>", "Text",
 CellChangeTimes->{{3.610972783074563*^9, 3.6109728242789197`*^9}, {
  3.610973878292206*^9, 3.6109738869166985`*^9}, {3.610974208955118*^9, 
  3.6109742185636683`*^9}, {3.6109765334810734`*^9, 3.6109765468548384`*^9}, {
  3.6109766013639565`*^9, 3.6109766080853405`*^9}, {3.610981367766387*^9, 
  3.61098136851643*^9}, {3.6109824542755313`*^9, 3.610982480737045*^9}, {
  3.6109825277797356`*^9, 3.61098266317548*^9}, {3.6428705075912743`*^9, 
  3.6428705076222773`*^9}, {3.657045141710595*^9, 3.6570451550479283`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"dhTransform", "[", 
    RowBox[{"\[Theta]_", ",", "d_", ",", "a_", ",", "alpha_"}], "]"}], ":=", 
   " ", 
   RowBox[{"(", GridBox[{
      {
       RowBox[{"Cos", "[", "\[Theta]", "]"}], 
       RowBox[{"-", 
        RowBox[{"Sin", "[", "\[Theta]", "]"}]}], "0", "a"},
      {
       RowBox[{
        RowBox[{"Sin", "[", "\[Theta]", "]"}], "*", 
        RowBox[{"Cos", "[", "alpha", "]"}]}], 
       RowBox[{
        RowBox[{"Cos", "[", "\[Theta]", "]"}], "*", 
        RowBox[{"Cos", "[", "alpha", "]"}]}], 
       RowBox[{"-", 
        RowBox[{"Sin", "[", "alpha", "]"}]}], 
       RowBox[{
        RowBox[{"-", 
         RowBox[{"Sin", "[", "alpha", "]"}]}], "*", "d"}]},
      {
       RowBox[{
        RowBox[{"Sin", "[", "\[Theta]", "]"}], "*", 
        RowBox[{"Sin", "[", "alpha", "]"}]}], 
       RowBox[{
        RowBox[{"Cos", "[", "\[Theta]", "]"}], "*", 
        RowBox[{"Sin", "[", "alpha", "]"}]}], 
       RowBox[{"Cos", "[", "alpha", "]"}], 
       RowBox[{
        RowBox[{"Cos", "[", "alpha", "]"}], "*", "d"}]},
      {"0", "0", "0", "1"}
     }], ")"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.610972783074563*^9, 3.6109728242789197`*^9}, {
   3.610973878292206*^9, 3.6109738869166985`*^9}, {3.610974208955118*^9, 
   3.6109742185636683`*^9}, {3.6109765334810734`*^9, 
   3.6109765468548384`*^9}, {3.6109766013639565`*^9, 
   3.6109766080853405`*^9}, {3.610981367766387*^9, 3.61098136851643*^9}, {
   3.6109824542755313`*^9, 3.610982480737045*^9}, {3.6109825277797356`*^9, 
   3.61098266317548*^9}, {3.6428705075912743`*^9, 3.6428705076222773`*^9}, 
   3.657045141710595*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Transformations: Consecutive Frames", "Subsection",
 CellChangeTimes->{{3.6570449886312885`*^9, 3.6570450034237676`*^9}, {
  3.6570450457610006`*^9, 3.657045068331258*^9}}],

Cell["From distal to proximal", "Text",
 CellChangeTimes->{{3.657045179512375*^9, 3.657045183735797*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"T01", "[", "\[Theta]mpa_", "]"}], ":=", 
    RowBox[{"dhTransform", "[", 
     RowBox[{"\[Theta]mpa", ",", "d1", ",", "a0", ",", "alpha0"}], "]"}]}], 
   ";"}], " ", 
  RowBox[{"(*", 
   RowBox[{
   "Transform", " ", "from", " ", "Frame", " ", "1", " ", "to", " ", "Frame", 
    " ", "0"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T12", "[", "\[Theta]mpf_", "]"}], ":=", 
   RowBox[{
    RowBox[{"dhTransform", "[", 
     RowBox[{"\[Theta]mpf", ",", "d2", ",", "a1", ",", "alpha1"}], "]"}], "//",
     "Evaluate"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T23", "[", "\[Theta]pip_", "]"}], ":=", 
   RowBox[{
    RowBox[{"dhTransform", "[", 
     RowBox[{"\[Theta]pip", ",", "d3", ",", "a2", ",", "alpha2"}], "]"}], "//",
     "Evaluate"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T34", "[", "\[Theta]dip_", "]"}], ":=", 
   RowBox[{
    RowBox[{"dhTransform", "[", 
     RowBox[{"\[Theta]dip", ",", "d4", ",", "a3", ",", "alpha3"}], "]"}], "//",
     "Evaluate"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"T45", " ", "=", " ", 
   RowBox[{"dhTransform", "[", 
    RowBox[{"\[Theta]5", ",", "d5", ",", "a4", ",", "alpha4"}], "]"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.610972818643597*^9, 3.6109728374406724`*^9}, {
   3.6109739074198713`*^9, 3.6109739866894054`*^9}, {3.610976755669782*^9, 
   3.610976772922769*^9}, {3.6109809189217143`*^9, 3.610980962362199*^9}, {
   3.6109812176528006`*^9, 3.6109812688217278`*^9}, {3.610981473809452*^9, 
   3.6109814892313337`*^9}, 3.6132980767597723`*^9, 3.613299381000183*^9, {
   3.6132994210821905`*^9, 3.6132994224253254`*^9}, {3.61329949827691*^9, 
   3.613299499604042*^9}, {3.613299561375219*^9, 3.6132995623663177`*^9}, {
   3.6132995971667976`*^9, 3.6132995982069016`*^9}, 3.613301114310497*^9, {
   3.6428695128808126`*^9, 3.6428695664101653`*^9}, {3.6428704329488106`*^9, 
   3.6428704564471602`*^9}, {3.642870507631278*^9, 3.6428705076352787`*^9}, {
   3.644073968377054*^9, 3.644073981425359*^9}, {3.657045007678193*^9, 
   3.657045008157241*^9}, {3.6675783871709447`*^9, 3.667578387865945*^9}, {
   3.6675785741429443`*^9, 3.6675785802059445`*^9}, {3.6817449785074563`*^9, 
   3.68174506705431*^9}}],

Cell["From proximal to distal", "Text",
 CellChangeTimes->{{3.657045188416265*^9, 3.657045193216745*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"T10", "[", "\[Theta]mpa_", "]"}], ":=", 
    RowBox[{"(", 
     RowBox[{
      RowBox[{"Inverse", "[", 
       RowBox[{"T01", "[", "\[Theta]mpa", "]"}], "]"}], "//", "Evaluate"}], 
     ")"}]}], ";"}], " ", 
  RowBox[{"(*", 
   RowBox[{
   "Transform", " ", "from", " ", "Frame", " ", "0", " ", "to", " ", "Frame", 
    " ", "1"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T21", "[", "\[Theta]mpf_", "]"}], ":=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"Inverse", "[", 
      RowBox[{"T12", "[", "\[Theta]mpf", "]"}], "]"}], "//", "Evaluate"}], 
    ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T32", "[", "\[Theta]pip_", "]"}], ":=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"Inverse", "[", 
      RowBox[{"T23", "[", "\[Theta]pip", "]"}], "]"}], "//", "Evaluate"}], 
    ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T43", "[", "\[Theta]dip_", "]"}], ":=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{"Inverse", "[", 
      RowBox[{"T34", "[", "\[Theta]dip", "]"}], "]"}], "//", "Evaluate"}], 
    ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"T54", " ", "=", " ", 
   RowBox[{"Inverse", "[", "T45", "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.610972818643597*^9, 3.6109728374406724`*^9}, {
   3.6109739074198713`*^9, 3.6109739866894054`*^9}, {3.610976755669782*^9, 
   3.610976772922769*^9}, {3.6109809189217143`*^9, 3.610980962362199*^9}, {
   3.6109812176528006`*^9, 3.6109812688217278`*^9}, {3.610981473809452*^9, 
   3.6109814892313337`*^9}, {3.6132980767597723`*^9, 
   3.6132982216542597`*^9}, {3.613301132071273*^9, 3.6133011561836834`*^9}, 
   3.613301193033368*^9, {3.613301236794744*^9, 3.613301290820146*^9}, {
   3.6133013766157246`*^9, 3.6133013777108345`*^9}, 3.6133015088279448`*^9, {
   3.6428695753220563`*^9, 3.6428696007626004`*^9}, {3.642869745521075*^9, 
   3.6428698287473965`*^9}, {3.6428704329578114`*^9, 
   3.6428704564351587`*^9}, {3.6440739880410204`*^9, 
   3.6440739983540516`*^9}, {3.6675785922459445`*^9, 
   3.6675786139169445`*^9}, {3.6817450247480803`*^9, 3.681745031068712*^9}, {
   3.681745075494154*^9, 3.6817451316727715`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Transformations: Global Reference Frame", "Subsection",
 CellChangeTimes->{{3.6570450180012255`*^9, 3.6570450404974747`*^9}, {
  3.657045073514776*^9, 3.657045079763401*^9}, {3.667584904670703*^9, 
  3.667584910207257*^9}}],

Cell["Transformations to the global reference frame", "Text",
 CellChangeTimes->{{3.6570451012055445`*^9, 3.6570451147729015`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"T02", "[", 
    RowBox[{"\[Theta]mpa_", ",", "\[Theta]mpf_"}], "]"}], " ", ":=", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T01", "[", "\[Theta]mpa", "]"}], " ", ".", " ", 
      RowBox[{"T12", "[", "\[Theta]mpf", "]"}]}], "//", "Evaluate"}], ")"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T03", "[", 
    RowBox[{"\[Theta]mpa_", ",", "\[Theta]mpf_", ",", "\[Theta]pip_"}], "]"}],
    " ", ":=", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T02", "[", 
       RowBox[{"\[Theta]mpa", ",", "\[Theta]mpf"}], "]"}], " ", ".", " ", 
      RowBox[{"T23", "[", "\[Theta]pip", "]"}]}], "//", "Evaluate"}], ")"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T04", "[", 
    RowBox[{
    "\[Theta]mpa_", ",", "\[Theta]mpf_", ",", "\[Theta]pip_", ",", " ", 
     "\[Theta]dip_"}], "]"}], " ", ":=", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T03", " ", "[", 
       RowBox[{"\[Theta]mpa", ",", "\[Theta]mpf", ",", "\[Theta]pip"}], "]"}],
       ".", " ", 
      RowBox[{"T34", "[", "\[Theta]dip", "]"}]}], "//", "Evaluate"}], ")"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T05", "[", 
    RowBox[{
    "\[Theta]mpa_", ",", "\[Theta]mpf_", ",", " ", "\[Theta]pip_", ",", " ", 
     "\[Theta]dip_"}], "]"}], " ", ":=", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T04", "[", 
       RowBox[{
       "\[Theta]mpa", ",", "\[Theta]mpf", ",", " ", "\[Theta]pip", ",", " ", 
        "\[Theta]dip"}], "]"}], " ", ".", " ", "T45"}], "//", "Evaluate"}], 
    ")"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6109814980678396`*^9, 3.610981594012327*^9}, 
   3.6133015141954813`*^9, {3.6133015701580772`*^9, 3.6133015710941706`*^9}, {
   3.6133016925393143`*^9, 3.6133016971467743`*^9}, {3.6133017509891586`*^9, 
   3.6133017524443035`*^9}, 3.6133020765117073`*^9, {3.6428699357670975`*^9, 
   3.642870041986718*^9}, {3.6428700746049795`*^9, 3.642870154287947*^9}, {
   3.6428704329648123`*^9, 3.6428704564421597`*^9}, 3.64287111440895*^9, {
   3.657035923631879*^9, 3.6570360773072453`*^9}, {3.6570450127997055`*^9, 
   3.6570450139038153`*^9}, {3.657045083883813*^9, 3.6570451219266167`*^9}, {
   3.667578628964945*^9, 3.6675786552589445`*^9}, {3.6817451534509487`*^9, 
   3.6817452379744005`*^9}, {3.681745288827485*^9, 3.6817453277943816`*^9}}],

Cell["Transformations from the global reference frame", "Text",
 CellChangeTimes->{{3.6570451255169754`*^9, 3.657045132821706*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"T20", "[", 
    RowBox[{"\[Theta]mpa_", ",", "\[Theta]mpf_"}], "]"}], " ", ":=", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T02", "[", 
       RowBox[{"\[Theta]mpa", ",", "\[Theta]mpf"}], "]"}], "//", "Inverse"}], 
     "//", "Evaluate"}], ")"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T30", "[", 
    RowBox[{"\[Theta]mpa_", ",", "\[Theta]mpf_", ",", "\[Theta]pip_"}], "]"}],
    " ", ":=", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T03", "[", 
       RowBox[{"\[Theta]mpa", ",", "\[Theta]mpf", ",", "\[Theta]pip"}], "]"}],
       "//", "Inverse"}], "//", "Evaluate"}], ")"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T40", "[", 
    RowBox[{
    "\[Theta]mpa_", ",", "\[Theta]mpf_", ",", "\[Theta]pip_", ",", 
     "\[Theta]dip_"}], "]"}], " ", ":=", " ", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T04", "[", 
       RowBox[{
       "\[Theta]mpa", ",", "\[Theta]mpf", ",", "\[Theta]pip", ",", 
        "\[Theta]dip"}], "]"}], "//", "Inverse"}], "//", "Evaluate"}], 
    ")"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6109814980678396`*^9, 3.610981594012327*^9}, 
   3.6133015141954813`*^9, {3.6133015701580772`*^9, 3.6133015710941706`*^9}, {
   3.6133016925393143`*^9, 3.6133016971467743`*^9}, {3.6133017509891586`*^9, 
   3.6133017524443035`*^9}, 3.6133020765117073`*^9, {3.6428699357670975`*^9, 
   3.642870041986718*^9}, {3.6428700746049795`*^9, 3.642870154287947*^9}, {
   3.6428704329648123`*^9, 3.6428704564421597`*^9}, 3.64287111440895*^9, {
   3.657035923631879*^9, 3.6570360773072453`*^9}, {3.6570450127997055`*^9, 
   3.6570450139038153`*^9}, {3.657045083883813*^9, 3.6570451219266167`*^9}, {
   3.66757822765805*^9, 3.6675782408973737`*^9}, {3.6675786621219444`*^9, 
   3.6675787043829446`*^9}, {3.6817452547030735`*^9, 3.68174531467307*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Transformations: Frame 2", "Subsection",
 CellChangeTimes->{{3.6675848339966364`*^9, 3.667584839972234*^9}, {
  3.667584917751011*^9, 3.667584918911127*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"T24", "[", 
    RowBox[{"\[Theta]pip_", ",", "\[Theta]dip_"}], "]"}], ":=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T23", "[", "\[Theta]pip", "]"}], ".", 
      RowBox[{"T34", "[", "\[Theta]dip", "]"}]}], "//", "Evaluate"}], ")"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T25", "[", 
    RowBox[{"\[Theta]pip_", ",", "\[Theta]dip_"}], "]"}], ":=", 
   RowBox[{"(", 
    RowBox[{
     RowBox[{
      RowBox[{"T23", "[", "\[Theta]pip", "]"}], ".", 
      RowBox[{"T34", "[", "\[Theta]dip", "]"}], ".", "T45"}], "//", 
     "Evaluate"}], ")"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6675848432245593`*^9, 3.667584865815818*^9}, {
   3.667584942810517*^9, 3.6675850033265676`*^9}, 3.667585165502784*^9}]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Other Finger Parameters", "Section",
 CellChangeTimes->{{3.693653809298089*^9, 3.693653811898349*^9}}],

Cell[CellGroupData[{

Cell["Joint Limits", "Subsection",
 CellChangeTimes->{{3.695513883615509*^9, 3.6955138857952485`*^9}}],

Cell["Limits for the MPa joint", "Text",
 CellChangeTimes->{{3.6970347582623234`*^9, 3.6970347642949266`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"\[Theta]mpaMin", "=", 
   RowBox[{
    RowBox[{"-", "30"}], "Degree"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"\[Theta]mpaMax", "=", 
   RowBox[{"30", "Degree"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6970347676182585`*^9, 3.6970347829797945`*^9}}],

Cell["Limits for the MPf joint", "Text",
 CellChangeTimes->{{3.697034797001197*^9, 3.697034802696766*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"\[Theta]mpfMin", "=", 
   RowBox[{
    RowBox[{"-", "45"}], "Degree"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"\[Theta]mpfMax", "=", 
   RowBox[{"90", "Degree"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.697034805784075*^9, 3.6970348224727435`*^9}, {
  3.697460760496471*^9, 3.6974607605744553`*^9}}],

Cell["Limits for the PIP joint", "Text",
 CellChangeTimes->{{3.695513932387206*^9, 3.695513937666946*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"\[Theta]pipMin", "=", 
   RowBox[{"0", "Degree"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"\[Theta]pipMax", "=", 
   RowBox[{"90", "Degree"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6955139528814435`*^9, 3.6955139651713457`*^9}}],

Cell["Limits for the DIP joint", "Text",
 CellChangeTimes->{{3.695513894100233*^9, 3.6955139041622305`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"\[Theta]dipMin", "=", 
   RowBox[{
    RowBox[{"-", "45"}], "Degree"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"\[Theta]dipMax", "=", 
   RowBox[{"90", "Degree"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.695558988374529*^9, 3.6955589884145327`*^9}, {
  3.6974608091602325`*^9, 3.6974608098082323`*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Joint Pulley Radii", "Subsection",
 CellChangeTimes->{{3.6936544062607794`*^9, 3.6936544098761406`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"rMPf", "=", "0.1875"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rPIP", "=", "0.1875"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"rDIP", "=", "0.1875"}], ";"}]}], "Input",
 CellChangeTimes->{{3.69365441907206*^9, 3.693654451455298*^9}, {
  3.6936607928123894`*^9, 3.693660792892397*^9}, {3.6936608284779553`*^9, 
  3.693660828644972*^9}, {3.693661694250533*^9, 3.6936617233234406`*^9}, {
  3.697460869541232*^9, 3.6974608785322323`*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Lateral Band Origin", "Subsection",
 CellChangeTimes->{{3.693654492999452*^9, 3.6936544972958813`*^9}}],

Cell["\<\
Location of the lateral band origin (relative to the chosen coordinate frame) \
when \[Theta]pip is zero and the central slip is taught.
Only one assignment for originLocStart should be active (i.e., uncommented) \
at a time. Each definition allows a different measurement to be used.\
\>", "Text",
 CellChangeTimes->{{3.693655978447982*^9, 3.693656010946232*^9}, {
  3.6936560881339493`*^9, 3.693656130063142*^9}, {3.693660302253338*^9, 
  3.693660374944607*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"specify", " ", "x"}], ",", " ", 
    RowBox[{
     RowBox[{"the", " ", "x"}], "-", 
     RowBox[{
     "coordinate", " ", "of", " ", "the", " ", "origin", " ", "in", " ", 
      "frame", " ", "2"}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"originLocStart", "=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", "x", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"x", "=", "0.69"}], ";", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{"x", ",", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"(", 
              RowBox[{"rMPf", "-", "rPIP"}], ")"}], "/", "a2"}], "*", "x"}], 
           "-", "rMPf"}], ",", "0", ",", "1"}], "}"}]}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"Specify", " ", "h"}], ",", " ", 
      RowBox[{
      "total", " ", "distance", " ", "from", " ", "top", " ", "of", " ", 
       "PIP", " ", "pulley", " ", "to", " ", "origin"}]}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"originLocStart", "=", 
      RowBox[{"Module", "[", 
       RowBox[{
        RowBox[{"{", "h", "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"h", "=", "0.25"}], ";", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"h", "*", 
            RowBox[{"Cos", "[", 
             RowBox[{"ArcTan", "[", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{"rMPf", "-", "rPIP"}], ")"}], "/", "a2"}], "]"}], 
             "]"}]}], ",", 
           RowBox[{
            RowBox[{"-", "rMPf"}], "+", 
            RowBox[{"h", "*", 
             RowBox[{"Sin", "[", 
              RowBox[{"ArcTan", "[", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{"rMPf", "-", "rPIP"}], ")"}], "/", "a2"}], "]"}], 
              "]"}]}]}], ",", "0", ",", "1"}], "}"}]}]}], 
       "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"Specify", " ", "v"}], ",", " ", 
       RowBox[{
       "total", " ", "distanec", " ", "from", " ", "top", " ", "of", " ", 
        "DIP", " ", "pulley", " ", "to", " ", "origin"}]}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"originLocStart", "=", 
      RowBox[{"Module", "[", 
       RowBox[{
        RowBox[{"{", "v", "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"v", "=", 
          RowBox[{"a2", "-", "0.25"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"a2", "-", 
            RowBox[{"v", "*", 
             RowBox[{"Cos", "[", 
              RowBox[{"ArcTan", "[", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{"rMPf", "-", "rPIP"}], ")"}], "/", "a2"}], "]"}], 
              "]"}]}]}], ",", 
           RowBox[{
            RowBox[{"-", "rPIP"}], "-", 
            RowBox[{"v", "*", 
             RowBox[{"Sin", "[", 
              RowBox[{"ArcTan", "[", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{"rMPf", "-", "rPIP"}], ")"}], "/", "a2"}], "]"}], 
              "]"}]}]}], ",", "0", ",", "1"}], "}"}]}]}], 
       "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
    "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.693654636803831*^9, 3.693654657072858*^9}, {
   3.6936547328934393`*^9, 3.6936547490290527`*^9}, {3.693654820280177*^9, 
   3.6936548481139603`*^9}, 3.693655972368374*^9, 3.693656141559292*^9, {
   3.693658438765008*^9, 3.693658453454477*^9}, {3.693658503161447*^9, 
   3.693658577891919*^9}, {3.6936586146865983`*^9, 3.6936587247576046`*^9}, {
   3.6936587696320915`*^9, 3.693658867086836*^9}, {3.6936589208792143`*^9, 
   3.693658943917518*^9}, {3.693659332624385*^9, 3.6936593929554176`*^9}, {
   3.6936594338455057`*^9, 3.693659496183739*^9}, {3.6936599551736336`*^9, 
   3.6936600221293287`*^9}, 3.6936600659707127`*^9, {3.6936600984609613`*^9, 
   3.6936602938084936`*^9}, {3.693660423697481*^9, 3.6936604388419957`*^9}, {
   3.693660473200431*^9, 3.693660485464658*^9}, {3.697645278008079*^9, 
   3.6976452781360917`*^9}, {3.697665456182695*^9, 3.697665459358012*^9}, {
   3.697679045115556*^9, 3.6976790456106052`*^9}, 3.69773661039571*^9, 
   3.6977366500626764`*^9, {3.697736789535622*^9, 3.6977367907337418`*^9}, {
   3.6977374683244944`*^9, 3.697737468571519*^9}, 3.697737521434805*^9, {
   3.697737587162377*^9, 3.6977376269473553`*^9}}],

Cell["Location of the lateral band origin for a given \[Theta]pip", "Text",
 CellChangeTimes->{{3.6936561435414896`*^9, 3.6936561612882643`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"originLoc", "[", "\[Theta]pip_", "]"}], ":=", 
   RowBox[{"originLocStart", "+", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"rPIP", "*", "\[Theta]pip", "*", 
       RowBox[{"Cos", "[", 
        RowBox[{"ArcTan", "[", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"rMPf", "-", "rPIP"}], ")"}], "/", "a2"}], "]"}], "]"}]}], 
      ",", 
      RowBox[{"rPIP", "*", "\[Theta]pip", "*", 
       RowBox[{"Sin", "[", 
        RowBox[{"ArcTan", "[", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"rMPf", "-", "rPIP"}], ")"}], "/", "a2"}], "]"}], "]"}]}], 
      ",", "0", ",", "0"}], "}"}]}]}], ";"}]], "Input",
 CellChangeTimes->{{3.693654636803831*^9, 3.693654657072858*^9}, {
   3.6936547328934393`*^9, 3.6936547490290527`*^9}, {3.693654820280177*^9, 
   3.6936548481139603`*^9}, 3.693655972368374*^9, 3.693656141559292*^9, {
   3.6936604501341248`*^9, 3.693660456973809*^9}, {3.693660561979308*^9, 
   3.693660685801689*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Lateral Band Union", "Subsection",
 CellChangeTimes->{{3.693654492999452*^9, 3.6936544972958813`*^9}, {
  3.693660853061414*^9, 3.693660854036511*^9}}],

Cell["\<\
Location of the lateral band union when \[Theta]dip is zero and the terminal \
slip is taught.
Only one assignment for unionLocStart should be active (i.e., uncommented) at \
a time. Each definition allows a different measurement to be used.\
\>", "Text",
 CellChangeTimes->{{3.693655978447982*^9, 3.693656010946232*^9}, {
  3.6936560881339493`*^9, 3.693656130063142*^9}, {3.693660302253338*^9, 
  3.693660374944607*^9}, {3.693660858453953*^9, 3.6936609015192585`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"specify", " ", "x"}], ",", " ", 
    RowBox[{
     RowBox[{"the", " ", "x"}], "-", 
     RowBox[{
     "coordinate", " ", "of", " ", "the", " ", "origin", " ", "in", " ", 
      "frame", " ", "3"}]}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"unionLocStart", "=", 
     RowBox[{"Module", "[", 
      RowBox[{
       RowBox[{"{", "x", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"x", "=", "0.5118"}], ";", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{"x", ",", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"(", 
              RowBox[{"rPIP", "-", "rDIP"}], ")"}], "/", "a3"}], "*", "x"}], 
           "-", "rPIP"}], ",", "0", ",", "1"}], "}"}]}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"Specify", " ", "h"}], ",", " ", 
      RowBox[{
      "total", " ", "distance", " ", "from", " ", "top", " ", "of", " ", 
       "DIP", " ", "pulley", " ", "to", " ", "union"}]}], "*)"}], 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"originLocStart", "=", 
      RowBox[{"Module", "[", 
       RowBox[{
        RowBox[{"{", "h", "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"h", "=", "0.25"}], ";", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"h", "*", 
            RowBox[{"Cos", "[", 
             RowBox[{"ArcTan", "[", 
              RowBox[{
               RowBox[{"(", 
                RowBox[{"rPIP", "-", "rDIP"}], ")"}], "/", "a3"}], "]"}], 
             "]"}]}], ",", 
           RowBox[{
            RowBox[{"-", "rPIP"}], "+", 
            RowBox[{"h", "*", 
             RowBox[{"Sin", "[", 
              RowBox[{"ArcTan", "[", 
               RowBox[{
                RowBox[{"(", 
                 RowBox[{"rPIP", "-", "rDIP"}], ")"}], "/", "a3"}], "]"}], 
              "]"}]}]}], ",", "0", ",", "1"}], "}"}]}]}], 
       "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
    "*)"}]}]}]], "Input",
 CellChangeTimes->{{3.693654636803831*^9, 3.693654657072858*^9}, {
   3.6936547328934393`*^9, 3.6936547490290527`*^9}, {3.693654820280177*^9, 
   3.6936548481139603`*^9}, 3.693655972368374*^9, 3.693656141559292*^9, {
   3.693658438765008*^9, 3.693658453454477*^9}, {3.693658503161447*^9, 
   3.693658577891919*^9}, {3.6936586146865983`*^9, 3.6936587247576046`*^9}, {
   3.6936587696320915`*^9, 3.693658867086836*^9}, {3.6936589208792143`*^9, 
   3.693658943917518*^9}, {3.693659332624385*^9, 3.6936593929554176`*^9}, {
   3.6936594338455057`*^9, 3.693659496183739*^9}, {3.6936599551736336`*^9, 
   3.6936600221293287`*^9}, 3.6936600659707127`*^9, {3.6936600984609613`*^9, 
   3.6936602938084936`*^9}, {3.693660423697481*^9, 3.6936604388419957`*^9}, {
   3.693660473200431*^9, 3.693660485464658*^9}, {3.6936608725333605`*^9, 
   3.6936608740125084`*^9}, {3.6936609079839053`*^9, 3.693660970090088*^9}, {
   3.6936611108850875`*^9, 3.6936611189300876`*^9}, {3.693661302979088*^9, 
   3.6936613473640876`*^9}, {3.693661439578088*^9, 3.6936614880530877`*^9}, {
   3.6976654690289793`*^9, 3.697665469516028*^9}, 3.6976790504740915`*^9, {
   3.697736526479743*^9, 3.6977365267597427`*^9}}],

Cell["Location of the lateral band union for a given \[Theta]dip", "Text",
 CellChangeTimes->{{3.6936561435414896`*^9, 3.6936561612882643`*^9}, {
  3.693660952392088*^9, 3.6936609556080875`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"unionLoc", "[", "\[Theta]dip_", "]"}], ":=", 
   RowBox[{"unionLocStart", "+", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"rDIP", "*", "\[Theta]dip", "*", 
       RowBox[{"Cos", "[", 
        RowBox[{"ArcTan", "[", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"rPIP", "-", "rDIP"}], ")"}], "/", "a3"}], "]"}], "]"}]}], 
      ",", 
      RowBox[{"rDIP", "*", "\[Theta]dip", "*", 
       RowBox[{"Sin", "[", 
        RowBox[{"ArcTan", "[", 
         RowBox[{
          RowBox[{"(", 
           RowBox[{"rPIP", "-", "rDIP"}], ")"}], "/", "a3"}], "]"}], "]"}]}], 
      ",", "0", ",", "0"}], "}"}]}]}], ";"}]], "Input",
 CellChangeTimes->{{3.693654636803831*^9, 3.693654657072858*^9}, {
   3.6936547328934393`*^9, 3.6936547490290527`*^9}, {3.693654820280177*^9, 
   3.6936548481139603`*^9}, 3.693655972368374*^9, 3.693656141559292*^9, {
   3.6936604501341248`*^9, 3.693660456973809*^9}, {3.693660561979308*^9, 
   3.693660685801689*^9}, 3.6936609576840878`*^9, {3.6936614983250875`*^9, 
   3.693661550686178*^9}, {3.6977371581624813`*^9, 3.697737163874052*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Mechanical Stop", "Subsection",
 CellChangeTimes->{{3.6936620383249373`*^9, 3.6936620407651815`*^9}}],

Cell["\<\
The mechanical stop is used to deflect the lateral bands as they move around \
the PIP joint. This notebook assumes that a mechanical stop is a cylinder \
that passes symmetrically through the width of the finger.\
\>", "Text",
 CellChangeTimes->{{3.693663185784672*^9, 3.6936632647625685`*^9}}],

Cell["Is there a mechanical stop?", "Text",
 CellChangeTimes->{{3.693662195227626*^9, 3.693662199828086*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"mechStopPresent", "=", "True"}], ";"}]], "Input",
 CellChangeTimes->{{3.693662204045508*^9, 3.693662208796983*^9}, {
  3.6936626572018185`*^9, 3.6936626590390024`*^9}, {3.693663116565751*^9, 
  3.69366311785388*^9}, {3.695748462327916*^9, 3.695748463581042*^9}, {
  3.6957484938780713`*^9, 3.6957484947221556`*^9}, {3.6957485978304653`*^9, 
  3.6957485992416067`*^9}, {3.6974610584592323`*^9, 3.6974610588592324`*^9}, {
  3.6974642512716703`*^9, 3.6974642529718404`*^9}, {3.697464289410484*^9, 
  3.6974642906396065`*^9}, {3.697736237274743*^9, 3.6977362378977427`*^9}, {
  3.697736559104743*^9, 3.697736563007743*^9}}],

Cell["\<\
Do the lateral bands pass over the \[OpenCurlyDoubleQuote]distal\
\[CloseCurlyDoubleQuote] or \[OpenCurlyDoubleQuote]volar\
\[CloseCurlyDoubleQuote] side of the mechanical stop?
If there is no mechanical stop, this option does not matter.\
\>", "Text",
 CellChangeTimes->{{3.6936625873448343`*^9, 3.69366263461456*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"mechStopSide", "=", "\"\<dorsal\>\""}], ";"}]], "Input",
 CellChangeTimes->{{3.6936626639474936`*^9, 3.6936627003721356`*^9}, {
  3.693663120638158*^9, 3.693663122173311*^9}, {3.6938556305745125`*^9, 
  3.693855643429798*^9}, {3.695512255006321*^9, 3.6955122560688753`*^9}, {
  3.6974610655782323`*^9, 3.6974610669702325`*^9}, {3.6974642845509977`*^9, 
  3.6974642859461374`*^9}, {3.6974643897145133`*^9, 3.697464391101652*^9}}],

Cell["In which frame is the stop anchored?", "Text",
 CellChangeTimes->{{3.6936630836984644`*^9, 3.693663103739468*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"mechStopFrame", "=", "2"}], ";"}]], "Input",
 CellChangeTimes->{{3.693663105288623*^9, 3.693663139142008*^9}}],

Cell["\<\
What are the coordinates of the center of the mechanical stop in this frame?\
\>", "Text",
 CellChangeTimes->{{3.6936631428873825`*^9, 3.693663159317025*^9}, {
  3.693663311452237*^9, 3.693663315660658*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"mechStopLoc", "=", 
   RowBox[{"{", 
    RowBox[{"a2", ",", "0", ",", "0", ",", "1"}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.693663161213215*^9, 3.693663172416335*^9}}],

Cell["Radius of the mechanical stop;", "Text",
 CellChangeTimes->{{3.6936632750705996`*^9, 3.6936632920592985`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"mechStopRad", "=", 
   RowBox[{"0.125", "/", "2"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.6936632941805105`*^9, 3.6936633041655087`*^9}, {
  3.693680900895053*^9, 3.693680922257189*^9}, {3.693682275065993*^9, 
  3.6936822751609926`*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Lateral Band Length", "Subsection",
 CellChangeTimes->{{3.6936638199430814`*^9, 3.6936638281309*^9}}],

Cell["\<\
Specify a pose that is known to be included in the joint coupling. This will \
be used to set the length of the lateral band.
knownPose has the form {\[Theta]pip,\[Theta]dip}\
\>", "Text",
 CellChangeTimes->{{3.6936638524043274`*^9, 3.693663975201606*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"knownPose", "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"0", "Degree"}], ",", 
     RowBox[{"0", "Degree"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.6936639952966146`*^9, 3.693664004412526*^9}, {
  3.6944534015341215`*^9, 3.694453471337101*^9}, {3.695495254977629*^9, 
  3.6954952580319347`*^9}, {3.6955122103930893`*^9, 3.695512213333152*^9}}],

Cell["\<\
This method places the finger in a specified pose and calculates the \
locations of the lateral band origin and lateral band union. The path that \
the lateral bands take from the origin to the union (including effects \
introduced by a mechanical stop) is then calculated. The length of this path, \
which is also the length of the lateral band, is then found
See research notes from 6 September 2016\
\>", "Text",
 CellChangeTimes->{{3.6936641808901725`*^9, 3.6936643022633085`*^9}, {
  3.6955137468190947`*^9, 3.6955137527882814`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"findLateralBandLength", "[", 
    RowBox[{"\[Theta]pip_", ",", "\[Theta]dip_"}], "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "p1", ",", "p2", ",", "length", ",", "c", ",", "q1a", ",", "q1b", ",", 
       "q2a", ",", "q2b", ",", "q1", ",", "q2", ",", "onStop", ",", "lengthA",
        ",", "lengthB", ",", "ang1", ",", "ang2", ",", "angleWrapped", ",", 
       "lengthC"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"p1", "=", 
       RowBox[{
        RowBox[{"originLoc", "[", "\[Theta]pip", "]"}], "[", 
        RowBox[{"[", 
         RowBox[{"1", ";;", "3"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"p2", "=", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"T23", "[", "\[Theta]pip", "]"}], ".", 
          RowBox[{"unionLoc", "[", "\[Theta]dip", "]"}]}], ")"}], "[", 
        RowBox[{"[", 
         RowBox[{"1", ";;", "3"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]",
       "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"mechStopPresent", "\[Equal]", "False"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"length", "=", 
         RowBox[{"EuclideanDistance", "[", 
          RowBox[{"p1", ",", "p2"}], "]"}]}], "\[IndentingNewLine]", ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"mechStopFrame", "\[Equal]", "2"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"c", "=", 
            RowBox[{"mechStopLoc", "[", 
             RowBox[{"[", 
              RowBox[{"1", ";;", "3"}], "]"}], "]"}]}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"c", "=", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{
               RowBox[{"T23", "[", "\[Theta]pip", "]"}], ".", "mechStopLoc"}],
               ")"}], "[", 
             RowBox[{"[", 
              RowBox[{"1", ";;", "3"}], "]"}], "]"}]}]}], 
          "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"q1a", ",", "q1b"}], "}"}], "=", 
          RowBox[{"pointsTangent", "[", 
           RowBox[{
            RowBox[{"p1", "[", 
             RowBox[{"[", 
              RowBox[{"1", ";;", "2"}], "]"}], "]"}], ",", 
            RowBox[{"c", "[", 
             RowBox[{"[", 
              RowBox[{"1", ";;", "2"}], "]"}], "]"}], ",", "mechStopRad"}], 
           "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"q2a", ",", "q2b"}], "}"}], "=", 
          RowBox[{"pointsTangent", "[", 
           RowBox[{
            RowBox[{"p2", "[", 
             RowBox[{"[", 
              RowBox[{"1", ";;", "2"}], "]"}], "]"}], ",", 
            RowBox[{"c", "[", 
             RowBox[{"[", 
              RowBox[{"1", ";;", "2"}], "]"}], "]"}], ",", "mechStopRad"}], 
           "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"q1a", "=", 
          RowBox[{"Join", "[", 
           RowBox[{"q1a", ",", 
            RowBox[{"{", "0", "}"}]}], "]"}]}], ";", 
         RowBox[{"q1b", "=", 
          RowBox[{"Join", "[", 
           RowBox[{"q1b", ",", 
            RowBox[{"{", "0", "}"}]}], "]"}]}], ";", 
         RowBox[{"q2a", "=", 
          RowBox[{"Join", "[", 
           RowBox[{"q2a", ",", 
            RowBox[{"{", "0", "}"}]}], "]"}]}], ";", 
         RowBox[{"q2b", "=", 
          RowBox[{"Join", "[", 
           RowBox[{"q2b", ",", 
            RowBox[{"{", "0", "}"}]}], "]"}]}], ";", "\n", 
         "\[IndentingNewLine]", 
         RowBox[{"q1", "=", "\"\<error\>\""}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"mechStopSide", "===", "\"\<dorsal\>\""}], ",", " ", 
           RowBox[{"(*", 
            RowBox[{
            "If", " ", "the", " ", "tendon", " ", "passes", " ", "on", " ", 
             "the", " ", "dorsal", " ", "side"}], "*)"}], 
           "\[IndentingNewLine]", 
           RowBox[{"If", "[", " ", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{"q1a", "-", "p1"}], ")"}], "\[Cross]", 
                 RowBox[{"(", 
                  RowBox[{"q1b", "-", "p1"}], ")"}]}], ")"}], "[", 
               RowBox[{"[", "3", "]"}], "]"}], " ", ">", " ", "0"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"q1", "=", "q1a"}], ",", "\[IndentingNewLine]", 
             RowBox[{"q1", "=", "q1b"}]}], "\[IndentingNewLine]", "]"}], "\n",
            "\t", ",", "\[IndentingNewLine]", 
           RowBox[{"If", "[", " ", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{"q1a", "-", "p1"}], ")"}], "\[Cross]", 
                 RowBox[{"(", 
                  RowBox[{"q1b", "-", "p1"}], ")"}]}], ")"}], "[", 
               RowBox[{"[", "3", "]"}], "]"}], " ", "<", " ", "0"}], ",", " ", 
             RowBox[{"(*", 
              RowBox[{"Else", ",", " ", 
               RowBox[{
               "if", " ", "the", " ", "tendon", " ", "passes", " ", "on", " ",
                 "the", " ", "volar", " ", "side"}]}], "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"q1", "=", "q1a"}], ",", "\[IndentingNewLine]", 
             RowBox[{"q1", "=", "q1b"}]}], "\[IndentingNewLine]", "]"}]}], 
          "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{"q2", "=", "\"\<error\>\""}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"mechStopSide", "===", "\"\<dorsal\>\""}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"If", "[", " ", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{"q2a", "-", "p2"}], ")"}], "\[Cross]", 
                 RowBox[{"(", 
                  RowBox[{"q2b", "-", "p2"}], ")"}]}], ")"}], "[", 
               RowBox[{"[", "3", "]"}], "]"}], " ", "<", " ", "0"}], ",", " ", 
             RowBox[{"(*", 
              RowBox[{
              "If", " ", "the", " ", "tendon", " ", "passes", " ", "on", " ", 
               "the", " ", "dorsal", " ", "side"}], "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"q2", "=", "q2a"}], ",", "\[IndentingNewLine]", 
             RowBox[{"q2", "=", "q2b"}]}], "\[IndentingNewLine]", "]"}], "\n",
            "\t", ",", "\[IndentingNewLine]", 
           RowBox[{"If", "[", " ", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{"q2a", "-", "p2"}], ")"}], "\[Cross]", 
                 RowBox[{"(", 
                  RowBox[{"q2b", "-", "p2"}], ")"}]}], ")"}], "[", 
               RowBox[{"[", "3", "]"}], "]"}], " ", ">", " ", "0"}], ",", " ", 
             RowBox[{"(*", 
              RowBox[{"Else", ",", " ", 
               RowBox[{
               "if", " ", "the", " ", "tendon", " ", "passes", " ", "on", " ",
                 "the", " ", "volar", " ", "side"}]}], "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"q2", "=", "q2a"}], ",", "\[IndentingNewLine]", 
             RowBox[{"q2", "=", "q2b"}]}], "\[IndentingNewLine]", "]"}]}], 
          "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{"onStop", "=", "\"\<error\>\""}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"mechStopSide", "===", "\"\<dorsal\>\""}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{"p2", "-", "p1"}], ")"}], "\[Cross]", 
                 RowBox[{"(", 
                  RowBox[{"q1", "-", "p1"}], ")"}]}], ")"}], "[", 
               RowBox[{"[", "3", "]"}], "]"}], " ", ">", " ", "0"}], ",", " ", 
             RowBox[{"(*", 
              RowBox[{
              "If", " ", "tendon", " ", "on", " ", "dorsal", " ", "side"}], 
              "*)"}], "\[IndentingNewLine]", 
             RowBox[{"onStop", "=", "False"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"onStop", "=", "True"}], ";"}]}], "\[IndentingNewLine]",
             "]"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"(", 
                RowBox[{
                 RowBox[{"(", 
                  RowBox[{"p2", "-", "p1"}], ")"}], "\[Cross]", 
                 RowBox[{"(", 
                  RowBox[{"q1", "-", "p1"}], ")"}]}], ")"}], "[", 
               RowBox[{"[", "3", "]"}], "]"}], " ", "<", " ", "0"}], ",", " ", 
             RowBox[{"(*", 
              RowBox[{"If", " ", "on", " ", "volar", " ", "side"}], "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"onStop", "=", "False"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"onStop", "=", "True"}], ";"}]}], "\[IndentingNewLine]",
             "]"}]}], "\[IndentingNewLine]", "]"}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"length", "=", "\"\<error\>\""}], ";", "\[IndentingNewLine]",
          "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"onStop", "\[Equal]", "False"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"length", "=", 
            RowBox[{"EuclideanDistance", "[", 
             RowBox[{"p1", ",", "p2"}], "]"}]}]}], "\[IndentingNewLine]", 
          "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"onStop", "\[Equal]", "True"}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"lengthA", "=", 
             RowBox[{"EuclideanDistance", "[", 
              RowBox[{"p1", ",", "q1"}], "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"lengthB", "=", 
             RowBox[{"EuclideanDistance", "[", 
              RowBox[{"q2", ",", "p2"}], "]"}]}], ";", "\[IndentingNewLine]", 
            RowBox[{"ang1", "=", 
             RowBox[{"ArcTan", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"q1", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "-", 
                RowBox[{"c", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], ",", 
               RowBox[{
                RowBox[{"q1", "[", 
                 RowBox[{"[", "2", "]"}], "]"}], "-", 
                RowBox[{"c", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"While", "[", 
             RowBox[{
              RowBox[{"ang1", "<", "0"}], ",", 
              RowBox[{"ang1", "=", 
               RowBox[{"ang1", "+", 
                RowBox[{"2", "*", "\[Pi]"}]}]}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"ang2", "=", 
             RowBox[{"ArcTan", "[", 
              RowBox[{
               RowBox[{
                RowBox[{"q2", "[", 
                 RowBox[{"[", "1", "]"}], "]"}], "-", 
                RowBox[{"c", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], ",", 
               RowBox[{
                RowBox[{"q2", "[", 
                 RowBox[{"[", "2", "]"}], "]"}], "-", 
                RowBox[{"c", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}]}], "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"While", "[", 
             RowBox[{
              RowBox[{"ang2", "<", "0"}], ",", 
              RowBox[{"ang2", "=", 
               RowBox[{"ang2", "+", 
                RowBox[{"2", "*", "\[Pi]"}]}]}]}], "]"}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"angleWrapped", "=", 
             RowBox[{"Abs", "[", 
              RowBox[{"ang1", "-", "ang2"}], "]"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"lengthC", "=", 
             RowBox[{"mechStopRad", "*", "angleWrapped"}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{"length", "=", 
             RowBox[{"lengthA", "+", "lengthB", "+", "lengthC"}]}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", "length"}]}], "\[IndentingNewLine]", "]"}], 
      ";", "\[IndentingNewLine]", "length"}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.693664014930578*^9, 3.693664026781763*^9}, {
   3.693664465161597*^9, 3.693664562150295*^9}, {3.6936653088132677`*^9, 
   3.6936653745382676`*^9}, {3.6936654455742674`*^9, 
   3.6936655207792673`*^9}, {3.6936659919642763`*^9, 
   3.6936660750975885`*^9}, {3.693666108844963*^9, 3.6936661160516834`*^9}, {
   3.6936661750795856`*^9, 3.693666192544332*^9}, {3.693666285853662*^9, 
   3.693666341631239*^9}, {3.6936665415772314`*^9, 3.693666544184492*^9}, {
   3.693666613878461*^9, 3.6936666515952325`*^9}, {3.693679356282607*^9, 
   3.6936793780697856`*^9}, {3.693679448110789*^9, 3.693679471344112*^9}, {
   3.6936803544074097`*^9, 3.693680357805749*^9}, {3.693681016219584*^9, 
   3.693681026795642*^9}, {3.693681201228083*^9, 3.6936812527112308`*^9}, {
   3.6936816226787543`*^9, 3.693681624973525*^9}, {3.693682137559993*^9, 
   3.693682160097993*^9}, 3.693682201796993*^9, 3.6936822460099926`*^9, {
   3.693682410466014*^9, 3.6936824520661736`*^9}, {3.693682733014265*^9, 
   3.6936827607820415`*^9}, {3.6937610229227614`*^9, 3.693761025490018*^9}, {
   3.6937629705315123`*^9, 3.693762999980457*^9}, {3.6937630504455028`*^9, 
   3.693763053478806*^9}, {3.693854403189787*^9, 3.6938544839768643`*^9}, {
   3.693854520507517*^9, 3.693854522049671*^9}, {3.6938546130217676`*^9, 
   3.693854684921957*^9}, {3.6938547296604304`*^9, 3.693854734396904*^9}, {
   3.693854773149779*^9, 3.693855040636525*^9}, 3.693855100735534*^9, {
   3.693855156658126*^9, 3.6938551848189416`*^9}, {3.6938556547099257`*^9, 
   3.693855710413496*^9}, {3.6938557612235765`*^9, 3.693855765696024*^9}, {
   3.6944534846704345`*^9, 3.6944534978707542`*^9}, {3.694453715688534*^9, 
   3.69445373555252*^9}, {3.695491488087978*^9, 3.6954914895531244`*^9}, 
   3.6954919252596908`*^9, {3.695493149261079*^9, 3.6954931670118537`*^9}, {
   3.6954932293430862`*^9, 3.6954934187380238`*^9}, {3.695493477587908*^9, 
   3.695493478418991*^9}, {3.6954935354686956`*^9, 3.69549353610876*^9}, {
   3.695493744684615*^9, 3.6954938782399693`*^9}, {3.6954939092450695`*^9, 
   3.695493909990144*^9}, {3.695493980425187*^9, 3.6954940131394577`*^9}, {
   3.695494080758219*^9, 3.6954940811022534`*^9}, {3.6954941363807807`*^9, 
   3.6954941627534175`*^9}, {3.6954942693410754`*^9, 
   3.6954943942035604`*^9}, {3.6954944739695363`*^9, 
   3.6954945375708957`*^9}, {3.695494604759614*^9, 3.695494825869723*^9}, {
   3.6954949672488594`*^9, 3.695494992341368*^9}, {3.6954950358767214`*^9, 
   3.6954950503701706`*^9}, {3.6954951040395365`*^9, 
   3.6954952070958414`*^9}, {3.6954952787540064`*^9, 
   3.6954952849516263`*^9}, {3.6954957819743233`*^9, 3.695495805149641*^9}, {
   3.695496021918316*^9, 3.6954960259527187`*^9}, {3.695496063781502*^9, 
   3.695496098181941*^9}, {3.695510152753631*^9, 3.6955101867770524`*^9}, {
   3.69551272811283*^9, 3.6955127339251423`*^9}, {3.6955128679049644`*^9, 
   3.6955128705926013`*^9}, {3.69551294922348*^9, 3.695512949535976*^9}, {
   3.6955137796030874`*^9, 3.6955137808062706`*^9}, {3.695670216592923*^9, 
   3.695670313979661*^9}, {3.6956703556198244`*^9, 3.69567035617288*^9}, {
   3.697737247713435*^9, 3.6977373180654697`*^9}}],

Cell["\<\
Length of lateral bands. This is found by calculating the length of the \
lateral band in the specified known pose.\
\>", "Text",
 CellChangeTimes->{{3.695513787528782*^9, 3.6955138356002526`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"lateralBandLength", "=", 
   RowBox[{"findLateralBandLength", "@@", "knownPose"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.693664014930578*^9, 3.693664026781763*^9}, {
   3.693664465161597*^9, 3.693664562150295*^9}, {3.6936653088132677`*^9, 
   3.6936653745382676`*^9}, {3.6936654455742674`*^9, 
   3.6936655207792673`*^9}, {3.6936659919642763`*^9, 
   3.6936660750975885`*^9}, {3.693666108844963*^9, 3.6936661160516834`*^9}, {
   3.6936661750795856`*^9, 3.693666192544332*^9}, {3.693666285853662*^9, 
   3.693666341631239*^9}, {3.6936665415772314`*^9, 3.693666544184492*^9}, {
   3.693666613878461*^9, 3.6936666515952325`*^9}, {3.693679356282607*^9, 
   3.6936793780697856`*^9}, {3.693679448110789*^9, 3.693679471344112*^9}, {
   3.6936803544074097`*^9, 3.693680357805749*^9}, {3.693681016219584*^9, 
   3.693681026795642*^9}, {3.693681201228083*^9, 3.6936812527112308`*^9}, {
   3.6936816226787543`*^9, 3.693681624973525*^9}, {3.693682137559993*^9, 
   3.693682160097993*^9}, 3.693682201796993*^9, 3.6936822460099926`*^9, {
   3.693682410466014*^9, 3.6936824520661736`*^9}, {3.693682733014265*^9, 
   3.6936827607820415`*^9}, {3.6937610229227614`*^9, 3.693761025490018*^9}, {
   3.6937629705315123`*^9, 3.693762999980457*^9}, {3.6937630504455028`*^9, 
   3.693763053478806*^9}, {3.693854403189787*^9, 3.6938544839768643`*^9}, {
   3.693854520507517*^9, 3.693854522049671*^9}, {3.6938546130217676`*^9, 
   3.693854684921957*^9}, {3.6938547296604304`*^9, 3.693854734396904*^9}, {
   3.693854773149779*^9, 3.693855040636525*^9}, 3.693855100735534*^9, {
   3.693855156658126*^9, 3.6938551848189416`*^9}, {3.6938556547099257`*^9, 
   3.693855710413496*^9}, {3.6938557612235765`*^9, 3.693855765696024*^9}, {
   3.6944534846704345`*^9, 3.6944534978707542`*^9}, {3.694453715688534*^9, 
   3.69445373555252*^9}, {3.695491488087978*^9, 3.6954914895531244`*^9}, 
   3.6954919252596908`*^9, {3.695493149261079*^9, 3.6954931670118537`*^9}, {
   3.6954932293430862`*^9, 3.6954934187380238`*^9}, {3.695493477587908*^9, 
   3.695493478418991*^9}, {3.6954935354686956`*^9, 3.69549353610876*^9}, {
   3.695493744684615*^9, 3.6954938782399693`*^9}, {3.6954939092450695`*^9, 
   3.695493909990144*^9}, {3.695493980425187*^9, 3.6954940131394577`*^9}, {
   3.695494080758219*^9, 3.6954940811022534`*^9}, {3.6954941363807807`*^9, 
   3.6954941627534175`*^9}, {3.6954942693410754`*^9, 
   3.6954943942035604`*^9}, {3.6954944739695363`*^9, 
   3.6954945375708957`*^9}, {3.695494604759614*^9, 3.695494825869723*^9}, {
   3.6954949672488594`*^9, 3.695494992341368*^9}, {3.6954950358767214`*^9, 
   3.6954950503701706`*^9}, {3.6954951040395365`*^9, 
   3.6954952070958414`*^9}, {3.6954952787540064`*^9, 
   3.6954952849516263`*^9}, {3.6954957819743233`*^9, 3.695495805149641*^9}, {
   3.695496021918316*^9, 3.6954960259527187`*^9}, {3.695496063781502*^9, 
   3.695496098181941*^9}, {3.695510152753631*^9, 3.6955101867770524`*^9}, {
   3.69551272811283*^9, 3.6955127339251423`*^9}, {3.6955128679049644`*^9, 
   3.6955128705926013`*^9}, {3.69551294922348*^9, 3.695512949535976*^9}, {
   3.6955137796030874`*^9, 3.6955137808062706`*^9}, {3.6977368168013487`*^9, 
   3.697736822169885*^9}, {3.6977368991815853`*^9, 3.6977369539750643`*^9}, {
   3.697736997066373*^9, 3.6977370541570816`*^9}, {3.697737238820546*^9, 
   3.6977372392515893`*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Flexor Pins", "Subsection",
 CellChangeTimes->{{3.6957483449411793`*^9, 3.695748346708356*^9}}],

Cell["Metacarpal pins", "Text",
 CellChangeTimes->{{3.697036566838163*^9, 3.697036571549634*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"metaFlexorPinProx", "=", 
   RowBox[{"{", 
    RowBox[{"0.0625", ",", "0", ",", 
     RowBox[{"-", "0.3070"}], ",", "1"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"metaFlexorPinDist", "=", 
   RowBox[{"{", 
    RowBox[{"2.6708", ",", "0", ",", 
     RowBox[{"-", "0.3070"}], ",", "1"}], "}"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.6970365789763765`*^9, 3.6970365867041492`*^9}, {
  3.6970366539538736`*^9, 3.697036680492527*^9}, {3.697040451410581*^9, 
  3.6970404773711767`*^9}, {3.6970405177172112`*^9, 3.6970405333417735`*^9}, {
  3.697041728546282*^9, 3.6970417297934065`*^9}, {3.697041764499877*^9, 
  3.697041765458973*^9}}],

Cell["Transitional piece pins", "Text",
 CellChangeTimes->{{3.6970366864591236`*^9, 3.697036693114789*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
  "There", " ", "are", " ", "no", " ", "pins", " ", "on", " ", "the", " ", 
   "transitional", " ", "piece"}], "*)"}]], "Input",
 CellChangeTimes->{{3.6970366951889963`*^9, 3.697036714444922*^9}, {
  3.697037380139485*^9, 3.697037389763447*^9}}],

Cell["Proximal phalanx pins", "Text",
 CellChangeTimes->{{3.697036718116289*^9, 3.6970367236128387`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"proxFlexorPinProx", "=", 
   RowBox[{"{", 
    RowBox[{"0.3700", ",", "0.3125", ",", "0", ",", "1"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"proxFlexorPinDist", "=", 
   RowBox[{"{", 
    RowBox[{"1.3800", ",", "0.3125", ",", "0", ",", "1"}], "}"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.697036725246002*^9, 3.697036738559333*^9}, {
  3.6970405722476635`*^9, 3.697040595135952*^9}, {3.697040722682706*^9, 
  3.6970407250269403`*^9}}],

Cell["Middle phalanx pins", "Text",
 CellChangeTimes->{{3.6970367436698437`*^9, 3.6970367480862856`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"midFlexorPinProx", "=", 
   RowBox[{"{", 
    RowBox[{"0.3700", ",", "0.3125", ",", "0", ",", "1"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"midFlexorPinDist", "=", 
   RowBox[{"{", 
    RowBox[{"0.8800", ",", "0.3125", ",", "0", ",", "1"}], "}"}]}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.6970367499284697`*^9, 3.6970367625927362`*^9}, {
  3.6970380121436787`*^9, 3.697038014837948*^9}, {3.6970407866971064`*^9, 
  3.697040831466583*^9}, {3.6970408676362*^9, 3.697040868780314*^9}}],

Cell["Distal phalanx pin", "Text",
 CellChangeTimes->{{3.6970367661340904`*^9, 3.6970367715346303`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"distFlexorPinProx", "=", 
   RowBox[{"{", 
    RowBox[{"0.3750", ",", "0.3125", ",", "0", ",", "1"}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
   "There", " ", "is", " ", "no", " ", "distal", " ", "flexor", " ", "pin", 
    " ", "on", " ", "the", " ", "distal", " ", "phalanx"}], 
   "*)"}]}]}], "Input",
 CellChangeTimes->{{3.697036774241901*^9, 3.697036802098686*^9}, {
  3.697041028939328*^9, 3.697041037779212*^9}}]
}, Closed]],

Cell[CellGroupData[{

Cell["Interossei Routings", "Subsection",
 CellChangeTimes->{{3.6971297586217146`*^9, 3.6971297631401663`*^9}}],

Cell[TextData[{
 "Pulley Center (given in frame 1)\nBecuase the interossei are symmetric \
about the finger\[CloseCurlyQuote]s sagittal plane when they cross the \
routing pulley, we do not need to consider them individually. Instead, we may \
consider them as a single, virtual interosseus that lies in the sagittal \
plane of the finger. As a result, the location of the routing pulley ",
 StyleBox["intPulleyLoc",
  FontSlant->"Italic"],
 " only considers the x and y-coordinates. The z-coordinate is set to zero so \
that the pulley also lies within the sagittal plane."
}], "Text",
 CellChangeTimes->{{3.697130201760024*^9, 3.6971302266335115`*^9}, {
  3.6971304935251975`*^9, 3.697130625122356*^9}, {3.697130658076651*^9, 
  3.6971306841012535`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"intPulleyLoc", "=", 
    RowBox[{
     RowBox[{"T12", "[", "\[Theta]mpf", "]"}], "[", 
     RowBox[{"[", 
      RowBox[{";;", ",", "4"}], "]"}], "]"}]}], ";"}], " ", 
  RowBox[{"(*", 
   RowBox[{"We", " ", "can", " ", "use", " ", "this", " ", 
    RowBox[{"(", 
     RowBox[{"instead", " ", "of", " ", "just", " ", "coordinates"}], ")"}], 
    " ", "becuause", " ", "the", " ", "pulley", " ", "is", " ", "coaxial", 
    " ", "with", " ", "the", " ", "mpf", " ", "axis"}], "*)"}]}]], "Input",
 CellChangeTimes->{{3.697130232139062*^9, 3.6971304252493706`*^9}}],

Cell["Pulley radius", "Text",
 CellChangeTimes->{{3.697130706149458*^9, 3.6971307106459074`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"intPulleyRad", "=", 
   RowBox[{
    RowBox[{"(", 
     RowBox[{"3", "/", "8"}], ")"}], "/", "2"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.697130713249168*^9, 3.6971307534571886`*^9}}],

Cell["Interosseus A (+z axis of frame 2)", "Text",
 CellChangeTimes->{{3.697130066137463*^9, 3.697130079986848*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"intARoutingProx", "=", 
    RowBox[{"{", 
     RowBox[{"2.6708", ",", "0.4688", ",", 
      RowBox[{"-", "0.1875"}], ",", "1"}], "}"}]}], ";"}], " ", 
  RowBox[{"(*", 
   RowBox[{"In", " ", "frame", " ", "0"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"intARoutingDist", "=", 
    RowBox[{"{", 
     RowBox[{"0.1005", ",", "0.4688", ",", 
      RowBox[{"-", "0.1875"}], ",", "1"}], "}"}]}], ";"}], " ", 
  RowBox[{"(*", 
   RowBox[{"In", " ", "frame", " ", "1"}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.697130103619211*^9, 3.697130113998249*^9}, {
   3.697130150151864*^9, 3.697130167774626*^9}, {3.697130778299672*^9, 
   3.6971307882596684`*^9}, {3.697131308467684*^9, 3.6971313093957767`*^9}, {
   3.697131462058041*^9, 3.6971314686016955`*^9}, {3.697131544421277*^9, 
   3.6971315454213767`*^9}, {3.697131622126046*^9, 3.6971316306969037`*^9}, {
   3.6971316717310066`*^9, 3.6971316990207353`*^9}, {3.6971352007748756`*^9, 
   3.6971352027810764`*^9}, 3.6971379478375545`*^9}],

Cell["Interosseus B (-z axis of frame 2)", "Text",
 CellChangeTimes->{{3.6971300854413934`*^9, 3.697130101227972*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"intBRoutingProx", "=", 
    RowBox[{"{", 
     RowBox[{"2.6708", ",", 
      RowBox[{"-", "0.4688"}], ",", 
      RowBox[{"-", "0.1875"}], ",", "1"}], "}"}]}], ";"}], " ", 
  RowBox[{"(*", 
   RowBox[{"In", " ", "frame", " ", "0"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"intBRoutingDist", "=", 
    RowBox[{"{", 
     RowBox[{"0.1005", ",", 
      RowBox[{"-", "0.4688"}], ",", 
      RowBox[{"-", "0.1875"}], ",", "1"}], "}"}]}], ";"}], " ", 
  RowBox[{"(*", 
   RowBox[{"In", " ", "frame", " ", "1"}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.6971301704728956`*^9, 3.697130189697818*^9}, {
   3.6971307914119835`*^9, 3.69713080247709*^9}, {3.697131321844021*^9, 
   3.6971313228601227`*^9}, {3.6971314745942945`*^9, 3.697131481626998*^9}, {
   3.6971315520070353`*^9, 3.69713155525436*^9}, {3.697131625289363*^9, 
   3.6971316366174955`*^9}, {3.6971316670595393`*^9, 3.697131668722706*^9}, {
   3.697131702037037*^9, 3.6971317037642097`*^9}, {3.6971352143512335`*^9, 
   3.6971352166464624`*^9}, 3.6971379523980103`*^9}]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Tendon Lengths", "Section",
 CellChangeTimes->{{3.697139056354395*^9, 3.6971390590016594`*^9}, {
  3.6971396513658905`*^9, 3.6971396533000836`*^9}}],

Cell[CellGroupData[{

Cell["Flexor", "Subsection",
 CellChangeTimes->{{3.6970371113906126`*^9, 3.69703711696517*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"flexorLength", "[", 
    RowBox[{
    "\[Theta]mpa_", ",", "\[Theta]mpf_", ",", "\[Theta]pip_", ",", 
     "\[Theta]dip_"}], "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "pin1", ",", "pin2", ",", "pin3", ",", "pin4", ",", "pin5", ",", "pin6",
        ",", "pin7", ",", "length"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"pin1", "=", "metaFlexorPinProx"}], ";", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"This", " ", "pin", " ", 
         RowBox[{"doesn", "'"}], "t", " ", "really", " ", "need", " ", "to", 
         " ", "be", " ", "included", " ", "because", " ", "it", " ", "is", 
         " ", "the", " ", "most", " ", "proximal", " ", "pin", " ", "and", 
         " ", "the", " ", "distance", " ", "between", " ", "it", " ", "and", 
         " ", "pin2", " ", "does", " ", "not", " ", "change"}], ";"}], "*)"}],
       "\[IndentingNewLine]", 
      RowBox[{"pin2", "=", "metaFlexorPinDist"}], ";", "\[IndentingNewLine]", 
      RowBox[{"pin3", "=", 
       RowBox[{
        RowBox[{"T02", "[", 
         RowBox[{"\[Theta]mpa", ",", "\[Theta]mpf"}], "]"}], ".", 
        "proxFlexorPinProx"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"pin4", "=", 
       RowBox[{
        RowBox[{"T02", "[", 
         RowBox[{"\[Theta]mpa", ",", "\[Theta]mpf"}], "]"}], ".", 
        "proxFlexorPinDist"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"pin5", "=", 
       RowBox[{
        RowBox[{"T03", "[", 
         RowBox[{"\[Theta]mpa", ",", "\[Theta]mpf", ",", "\[Theta]pip"}], 
         "]"}], ".", "midFlexorPinProx"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"pin6", "=", 
       RowBox[{
        RowBox[{"T03", "[", 
         RowBox[{"\[Theta]mpa", ",", "\[Theta]mpf", ",", "\[Theta]pip"}], 
         "]"}], ".", "midFlexorPinDist"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"pin7", "=", 
       RowBox[{
        RowBox[{"T04", "[", 
         RowBox[{
         "\[Theta]mpa", ",", "\[Theta]mpf", ",", "\[Theta]pip", ",", 
          "\[Theta]dip"}], "]"}], ".", "distFlexorPinProx"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"length", "=", 
       RowBox[{
        RowBox[{"EuclideanDistance", "[", 
         RowBox[{"pin2", ",", "pin3"}], "]"}], "+", 
        RowBox[{"EuclideanDistance", "[", 
         RowBox[{"pin4", ",", "pin5"}], "]"}], "+", 
        RowBox[{"EuclideanDistance", "[", 
         RowBox[{"pin6", ",", "pin7"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Return", "[", "length", "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.69703712546902*^9, 3.6970371465371265`*^9}, {
  3.697037313128784*^9, 3.6970373446109324`*^9}, {3.6970373984533157`*^9, 
  3.697037417750245*^9}, {3.697037552147684*^9, 3.6970376331597843`*^9}, {
  3.697037904452911*^9, 3.6970380551029744`*^9}, {3.697038870920548*^9, 
  3.697038952222677*^9}, {3.697039017225177*^9, 3.697039023844839*^9}, {
  3.6970390750789614`*^9, 3.6970391222856817`*^9}, {3.697041112703704*^9, 
  3.6970411151969533`*^9}, {3.697042268599282*^9, 3.697042275565978*^9}, {
  3.697463699446493*^9, 3.6974637107166204`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Extensor", "Subsection",
 CellChangeTimes->{{3.6970439439437995`*^9, 3.697043944895895*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"extensorLength", "[", "\[Theta]mpf_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "length", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"length", "=", 
       RowBox[{"\[Theta]mpf", "*", "rMPf"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Return", "[", "length", "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.6970439461550207`*^9, 3.6970439516895742`*^9}, {
  3.6970439980042048`*^9, 3.6970440717205763`*^9}, {3.697463716986247*^9, 
  3.6974637174972982`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Interossei", "Subsection",
 CellChangeTimes->{{3.697044158321235*^9, 3.6970441599283957`*^9}}],

Cell["Interosseus A (+z axis of frame 2)", "Text",
 CellChangeTimes->{{3.6970441658819914`*^9, 3.6970441977391768`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"interosseusALength", "[", 
    RowBox[{"\[Theta]mpa_", ",", "\[Theta]mpf_", ",", "\[Theta]pip_"}], "]"}],
    ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "seg1", ",", "p1", ",", "p2", ",", "c", ",", "q1a", ",", "q1b", ",", 
       "q2a", ",", "q2b", ",", "q1", ",", "q2", ",", "lengthA", ",", 
       "lengthB", ",", "ang1", ",", "ang2", ",", "angleWrapped", ",", 
       "lengthWrapped", ",", "seg2"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"seg1", "=", 
       RowBox[{"EuclideanDistance", "[", 
        RowBox[{"intARoutingProx", ",", 
         RowBox[{
          RowBox[{"T01", "[", "\[Theta]mpa", "]"}], ".", 
          "intARoutingDist"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"p1", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"intARoutingDist", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"intARoutingDist", "[", 
          RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"p2", "=", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"T12", "[", "\[Theta]mpf", "]"}], ".", 
          RowBox[{"originLoc", "[", "\[Theta]pip", "]"}]}], ")"}], "[", 
        RowBox[{"[", 
         RowBox[{"1", ";;", "3"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"c", "=", 
       RowBox[{"intPulleyLoc", "[", 
        RowBox[{"[", 
         RowBox[{"1", ";;", "3"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]",
       "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"q1a", ",", "q1b"}], "}"}], "=", 
       RowBox[{"pointsTangent", "[", 
        RowBox[{
         RowBox[{"p1", "[", 
          RowBox[{"[", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], "]"}], "]"}], ",", 
         RowBox[{"c", "[", 
          RowBox[{"[", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], "]"}], "]"}], ",", 
         "intPulleyRad"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"q2a", ",", "q2b"}], "}"}], "=", 
       RowBox[{"pointsTangent", "[", 
        RowBox[{
         RowBox[{"p2", "[", 
          RowBox[{"[", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], "]"}], "]"}], ",", 
         RowBox[{"c", "[", 
          RowBox[{"[", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], "]"}], "]"}], ",", 
         "intPulleyRad"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"q1a", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"q1a", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"q1a", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      RowBox[{"q1b", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"q1b", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"q1b", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      RowBox[{"q2a", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"q2a", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"q2a", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      RowBox[{"q2b", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"q2b", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"q2b", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", " ", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"q1a", "-", "p1"}], ")"}], "\[Cross]", 
            RowBox[{"(", 
             RowBox[{"q1b", "-", "p1"}], ")"}]}], ")"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}], " ", "<", " ", "0"}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{"If", " ", "q1a", " ", "is", " ", "volar"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"q1", "=", "q1a"}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{"make", " ", "it", " ", "the", " ", "q1"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"q1", "=", "q1b"}]}], " ", 
       RowBox[{"(*", 
        RowBox[{"else", ",", " ", 
         RowBox[{
         "q1b", " ", "is", " ", "volar", " ", "so", " ", "make", " ", "it", 
          " ", "the", " ", "q1"}]}], "*)"}], "\[IndentingNewLine]", "]"}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", " ", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"q2a", "-", "p2"}], ")"}], "\[Cross]", 
            RowBox[{"(", 
             RowBox[{"q2b", "-", "p2"}], ")"}]}], ")"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}], " ", ">", " ", "0"}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{"If", " ", "q2a", " ", "is", " ", "volar"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"q2", "=", "q2a"}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{"make", " ", "it", " ", "the", " ", "q2"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"q2", "=", "q2b"}]}], " ", 
       RowBox[{"(*", 
        RowBox[{"else", ",", " ", 
         RowBox[{
         "q2b", " ", "is", " ", "volar", " ", "so", " ", "make", " ", "it", 
          " ", "the", " ", "q2"}]}], "*)"}], "\[IndentingNewLine]", "]"}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"lengthA", "=", 
       RowBox[{"EuclideanDistance", "[", 
        RowBox[{"p1", ",", "q1"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"lengthB", "=", 
       RowBox[{"EuclideanDistance", "[", 
        RowBox[{"q2", ",", "p2"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"ang1", "=", 
       RowBox[{"ArcTan", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"q1", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "-", 
          RowBox[{"c", "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"q1", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "-", 
          RowBox[{"c", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{"ang1", "<", "0"}], ",", 
        RowBox[{"ang1", "=", 
         RowBox[{"ang1", "+", 
          RowBox[{"2", "*", "\[Pi]"}]}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"ang2", "=", 
       RowBox[{"ArcTan", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"q2", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "-", 
          RowBox[{"c", "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"q2", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "-", 
          RowBox[{"c", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{"ang2", "<", "0"}], ",", 
        RowBox[{"ang2", "=", 
         RowBox[{"ang2", "+", 
          RowBox[{"2", "*", "\[Pi]"}]}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"angleWrapped", "=", 
       RowBox[{"ang2", "-", "ang1"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"lengthWrapped", "=", 
       RowBox[{"intPulleyRad", "*", "angleWrapped"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"seg2", "=", 
       RowBox[{"lengthA", "+", "lengthB", "+", "lengthWrapped", "+", 
        RowBox[{"2", "\[Pi]", "*", "intPulleyRad"}]}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Return", "[", 
       RowBox[{"seg1", "+", "seg2"}], "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.6971310719770374`*^9, 3.697131194703308*^9}, {
   3.697132152161045*^9, 3.6971321531191406`*^9}, {3.697133122591078*^9, 
   3.6971331262474437`*^9}, {3.69713330162798*^9, 3.6971333790707235`*^9}, {
   3.6971334200328193`*^9, 3.69713351164998*^9}, {3.697133743235136*^9, 
   3.6971338177525873`*^9}, {3.697133855834395*^9, 3.697133919054716*^9}, {
   3.697134129127722*^9, 3.6971341293967485`*^9}, {3.697134241675975*^9, 
   3.697134303108118*^9}, 3.697134626443448*^9, {3.697134663392143*^9, 
   3.6971346670395074`*^9}, 3.6971347789666986`*^9, {3.697135293979195*^9, 
   3.697135295016299*^9}, 3.697135444850281*^9, {3.6971355798527794`*^9, 
   3.6971355849092855`*^9}, {3.697135740299823*^9, 3.6971357464194345`*^9}, {
   3.697135779023695*^9, 3.6971357923290253`*^9}, 3.697136349602747*^9, 
   3.6971366512399073`*^9, {3.697137040482828*^9, 3.697137041758956*^9}, {
   3.6971384572274885`*^9, 3.6971384777105365`*^9}, 3.697138790310793*^9, {
   3.6974637229238405`*^9, 3.6974637588824368`*^9}}],

Cell["Interosseus B (-z axis of frame 2)", "Text",
 CellChangeTimes->{{3.697044200394442*^9, 3.697044211915594*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"interosseusBLength", "[", 
    RowBox[{"\[Theta]mpa_", ",", "\[Theta]mpf_", ",", "\[Theta]pip_"}], "]"}],
    ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "seg1", ",", "p1", ",", "p2", ",", "c", ",", "q1a", ",", "q1b", ",", 
       "q2a", ",", "q2b", ",", "q1", ",", "q2", ",", "lengthA", ",", 
       "lengthB", ",", "ang1", ",", "ang2", ",", "angleWrapped", ",", 
       "lengthWrapped", ",", "seg2"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"seg1", "=", 
       RowBox[{"EuclideanDistance", "[", 
        RowBox[{"intBRoutingProx", ",", 
         RowBox[{
          RowBox[{"T01", "[", "\[Theta]mpa", "]"}], ".", 
          "intBRoutingDist"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"p1", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"intBRoutingDist", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"intBRoutingDist", "[", 
          RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"p2", "=", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{
          RowBox[{"T12", "[", "\[Theta]mpf", "]"}], ".", 
          RowBox[{"originLoc", "[", "\[Theta]pip", "]"}]}], ")"}], "[", 
        RowBox[{"[", 
         RowBox[{"1", ";;", "3"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"c", "=", 
       RowBox[{"intPulleyLoc", "[", 
        RowBox[{"[", 
         RowBox[{"1", ";;", "3"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]",
       "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"q1a", ",", "q1b"}], "}"}], "=", 
       RowBox[{"pointsTangent", "[", 
        RowBox[{
         RowBox[{"p1", "[", 
          RowBox[{"[", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], "]"}], "]"}], ",", 
         RowBox[{"c", "[", 
          RowBox[{"[", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], "]"}], "]"}], ",", 
         "intPulleyRad"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"q2a", ",", "q2b"}], "}"}], "=", 
       RowBox[{"pointsTangent", "[", 
        RowBox[{
         RowBox[{"p2", "[", 
          RowBox[{"[", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], "]"}], "]"}], ",", 
         RowBox[{"c", "[", 
          RowBox[{"[", 
           RowBox[{"{", 
            RowBox[{"1", ",", "3"}], "}"}], "]"}], "]"}], ",", 
         "intPulleyRad"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"q1a", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"q1a", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"q1a", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      RowBox[{"q1b", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"q1b", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"q1b", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      RowBox[{"q2a", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"q2a", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"q2a", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      RowBox[{"q2b", "=", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"q2b", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", "0", ",", 
         RowBox[{"q2b", "[", 
          RowBox[{"[", "2", "]"}], "]"}]}], "}"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", " ", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"q1a", "-", "p1"}], ")"}], "\[Cross]", 
            RowBox[{"(", 
             RowBox[{"q1b", "-", "p1"}], ")"}]}], ")"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}], " ", "<", " ", "0"}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{"If", " ", "q1a", " ", "is", " ", "volar"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"q1", "=", "q1a"}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{"make", " ", "it", " ", "the", " ", "q1"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"q1", "=", "q1b"}]}], " ", 
       RowBox[{"(*", 
        RowBox[{"else", ",", " ", 
         RowBox[{
         "q1b", " ", "is", " ", "volar", " ", "so", " ", "make", " ", "it", 
          " ", "the", " ", "q1"}]}], "*)"}], "\[IndentingNewLine]", "]"}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", " ", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"(", 
             RowBox[{"q2a", "-", "p2"}], ")"}], "\[Cross]", 
            RowBox[{"(", 
             RowBox[{"q2b", "-", "p2"}], ")"}]}], ")"}], "[", 
          RowBox[{"[", "2", "]"}], "]"}], " ", ">", " ", "0"}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{"If", " ", "q2a", " ", "is", " ", "volar"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"q2", "=", "q2a"}], ",", " ", 
        RowBox[{"(*", 
         RowBox[{"make", " ", "it", " ", "the", " ", "q2"}], "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{"q2", "=", "q2b"}]}], " ", 
       RowBox[{"(*", 
        RowBox[{"else", ",", " ", 
         RowBox[{
         "q2b", " ", "is", " ", "volar", " ", "so", " ", "make", " ", "it", 
          " ", "the", " ", "q2"}]}], "*)"}], "\[IndentingNewLine]", "]"}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"lengthA", "=", 
       RowBox[{"EuclideanDistance", "[", 
        RowBox[{"p1", ",", "q1"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"lengthB", "=", 
       RowBox[{"EuclideanDistance", "[", 
        RowBox[{"q2", ",", "p2"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"ang1", "=", 
       RowBox[{"ArcTan", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"q1", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "-", 
          RowBox[{"c", "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"q1", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "-", 
          RowBox[{"c", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{"ang1", "<", "0"}], ",", 
        RowBox[{"ang1", "=", 
         RowBox[{"ang1", "+", 
          RowBox[{"2", "*", "\[Pi]"}]}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"ang2", "=", 
       RowBox[{"ArcTan", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"q2", "[", 
           RowBox[{"[", "1", "]"}], "]"}], "-", 
          RowBox[{"c", "[", 
           RowBox[{"[", "1", "]"}], "]"}]}], ",", 
         RowBox[{
          RowBox[{"q2", "[", 
           RowBox[{"[", "3", "]"}], "]"}], "-", 
          RowBox[{"c", "[", 
           RowBox[{"[", "3", "]"}], "]"}]}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{"ang2", "<", "0"}], ",", 
        RowBox[{"ang2", "=", 
         RowBox[{"ang2", "+", 
          RowBox[{"2", "*", "\[Pi]"}]}]}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"angleWrapped", "=", 
       RowBox[{"ang2", "-", "ang1"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"lengthWrapped", "=", 
       RowBox[{"intPulleyRad", "*", "angleWrapped"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"seg2", "=", 
       RowBox[{"lengthA", "+", "lengthB", "+", "lengthWrapped", "+", 
        RowBox[{"2", "\[Pi]", "*", "intPulleyRad"}]}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Return", "[", 
       RowBox[{"seg1", "+", "seg2"}], "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.697134392161022*^9, 3.697134406426449*^9}, 
   3.69713462266007*^9, {3.6971346540392075`*^9, 3.697134657383542*^9}, 
   3.697134781657968*^9, {3.6971350039881988`*^9, 3.697135009289729*^9}, {
   3.697135285778375*^9, 3.697135286737471*^9}, 3.697135440090805*^9, {
   3.6971355283756323`*^9, 3.69713555395619*^9}, {3.6971357200287957`*^9, 
   3.69713573127392*^9}, {3.6971357739821906`*^9, 3.6971357884526377`*^9}, {
   3.697136325541341*^9, 3.6971363378385706`*^9}, {3.6971366251172953`*^9, 
   3.6971366409688807`*^9}, {3.697136961403921*^9, 3.697137019864766*^9}, {
   3.697138460397805*^9, 3.697138472152981*^9}, {3.6971387573795004`*^9, 
   3.697138776543417*^9}, 3.6974637703615837`*^9}]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Joint Coupling", "Section",
 CellChangeTimes->{{3.69550979874238*^9, 3.695509800851885*^9}}],

Cell["Method to find the joint coupling for a single PIP angle", "Text",
 CellChangeTimes->{{3.6955119614973683`*^9, 3.695511991459563*^9}, {
  3.695514090103441*^9, 3.695514090884731*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"findJointCoupling", "[", 
    RowBox[{"\[Theta]pip_", ",", 
     RowBox[{"lateralBandLengthTolerance_:", "0.00001"}], ",", 
     RowBox[{"iterationMax_:", "100"}]}], "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"lower", ",", "upper", ",", "point", ",", "len", ",", "dif"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"i", "=", "0"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"lower", "=", "\[Theta]dipMin"}], ";", "\[IndentingNewLine]", 
      RowBox[{"upper", "=", "\[Theta]dipMax"}], ";", "\[IndentingNewLine]", 
      RowBox[{"point", "=", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"lower", "+", "upper"}], ")"}], "/", "2"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"len", "=", 
       RowBox[{"findLateralBandLength", "[", 
        RowBox[{"\[Theta]pip", ",", "point"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"dif", "=", 
       RowBox[{"lateralBandLength", "-", "len"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"Abs", "[", "dif", "]"}], ">", 
           "lateralBandLengthTolerance"}], ")"}], "&&", 
         RowBox[{"(", 
          RowBox[{"i", "<", "iterationMax"}], ")"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"dif", ">", "0"}], ",", " ", 
           RowBox[{"(*", 
            RowBox[{"band", " ", "is", " ", "too", " ", "short"}], "*)"}], 
           "\[IndentingNewLine]", 
           RowBox[{"lower", "=", "point"}], ",", " ", 
           RowBox[{"(*", 
            RowBox[{
            "flex", " ", "the", " ", "DIP", " ", "to", " ", "lengthen", " ", 
             "the", " ", "band"}], "*)"}], "\[IndentingNewLine]", 
           RowBox[{"upper", "=", "point"}]}], "  ", 
          RowBox[{"(*", 
           RowBox[{"else", ",", " ", 
            RowBox[{
            "extend", " ", "the", " ", "DIP", " ", "to", " ", "shorten", " ", 
             "the", " ", "band"}]}], "*)"}], "\[IndentingNewLine]", "]"}], 
         ";", "\[IndentingNewLine]", 
         RowBox[{"point", "=", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{"lower", "+", "upper"}], ")"}], "/", "2"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"len", "=", 
          RowBox[{"findLateralBandLength", "[", 
           RowBox[{"\[Theta]pip", ",", "point"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"dif", "=", 
          RowBox[{"lateralBandLength", "-", "len"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"i", "++"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Abs", "[", "dif", "]"}], ">", 
         "lateralBandLengthTolerance"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"dif", ">", "0"}], ",", "\[IndentingNewLine]", 
           RowBox[{"point", "=", "\[Theta]dipMax"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"point", "=", "\"\<error\>\""}]}], "\[IndentingNewLine]", 
          "]"}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Return", "[", "point", "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.6955102896030455`*^9, 3.695510347784335*^9}, {
   3.695510392222354*^9, 3.695510520508724*^9}, {3.695510591791732*^9, 
   3.695510631771247*^9}, {3.695510682477927*^9, 3.6955108570132446`*^9}, {
   3.695510887667766*^9, 3.695510950195058*^9}, {3.6955109855360494`*^9, 
   3.6955111241792297`*^9}, {3.695511205682949*^9, 3.695511222190469*^9}, {
   3.6955113436290207`*^9, 3.6955113833118005`*^9}, {3.695511416351539*^9, 
   3.6955114241901197`*^9}, {3.695511456595627*^9, 3.6955114572050323`*^9}, {
   3.6955117993942776`*^9, 3.6955118473256216`*^9}, 3.6955594698276696`*^9, 
   3.695559506918378*^9, {3.6955597033020144`*^9, 3.6955597068533697`*^9}, {
   3.695559999154597*^9, 3.695560001377819*^9}, {3.695560131143794*^9, 
   3.695560174465126*^9}, {3.695560265839263*^9, 3.695560267965475*^9}, {
   3.6974637920687547`*^9, 3.697463820844632*^9}, {3.6974644581243534`*^9, 
   3.6974644585613976`*^9}}]
}, Closed]]
}, Open  ]]
},
WindowSize->{798, 808},
WindowMargins->{{-7, Automatic}, {Automatic, 0}},
ShowSelection->True,
FrontEndVersion->"11.0 for Microsoft Windows (64-bit) (September 21, 2016)",
StyleDefinitions->Notebook[{
   Cell[
    StyleData[StyleDefinitions -> "Default.nb"]], 
   Cell[
    StyleData["Text"]]}, Visible -> False, FrontEndVersion -> 
  "11.0 for Microsoft Windows (64-bit) (September 21, 2016)", 
  StyleDefinitions -> "PrivateStylesheetFormatting.nb"]
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 165, 2, 101, "Title"],
Cell[748, 26, 99, 1, 56, "Subtitle"],
Cell[CellGroupData[{
Cell[872, 31, 153, 2, 70, "Section"],
Cell[1028, 35, 342, 8, 68, "Text"]
}, Open  ]],
Cell[CellGroupData[{
Cell[1407, 48, 102, 1, 70, "Section"],
Cell[1512, 51, 162, 3, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[1711, 59, 168, 2, 56, "Section"],
Cell[1882, 63, 265, 6, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[2184, 74, 1099, 14, 56, "Section"],
Cell[CellGroupData[{
Cell[3308, 92, 104, 1, 70, "Subsection"],
Cell[3415, 95, 1806, 29, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[5258, 129, 401, 5, 70, "Subsection"],
Cell[5662, 136, 764, 15, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[6463, 156, 1482, 20, 70, "Subsection"],
Cell[7948, 178, 2065, 34, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[10050, 217, 483, 7, 70, "Subsection"],
Cell[10536, 226, 909, 19, 70, "Input"]
}, Closed]]
}, Closed]],
Cell[CellGroupData[{
Cell[11494, 251, 501, 7, 56, "Section"],
Cell[CellGroupData[{
Cell[12020, 262, 110, 1, 70, "Subsection"],
Cell[12133, 265, 618, 9, 70, "Text"],
Cell[12754, 276, 1644, 42, 70, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[14435, 323, 178, 2, 70, "Subsection"],
Cell[14616, 327, 105, 1, 70, "Text"],
Cell[14724, 330, 2315, 51, 70, "Input"],
Cell[17042, 383, 105, 1, 70, "Text"],
Cell[17150, 386, 2238, 54, 70, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[19425, 445, 229, 3, 70, "Subsection"],
Cell[19657, 450, 131, 1, 70, "Text"],
Cell[19791, 453, 2440, 60, 70, "Input"],
Cell[22234, 515, 131, 1, 70, "Text"],
Cell[22368, 518, 1923, 46, 70, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[24328, 569, 163, 2, 70, "Subsection"],
Cell[24494, 573, 800, 22, 70, "Input"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[25343, 601, 108, 1, 56, "Section"],
Cell[CellGroupData[{
Cell[25476, 606, 102, 1, 70, "Subsection"],
Cell[25581, 609, 110, 1, 70, "Text"],
Cell[25694, 612, 303, 8, 70, "Input"],
Cell[26000, 622, 106, 1, 70, "Text"],
Cell[26109, 625, 352, 9, 70, "Input"],
Cell[26464, 636, 106, 1, 70, "Text"],
Cell[26573, 639, 282, 7, 70, "Input"],
Cell[26858, 648, 108, 1, 70, "Text"],
Cell[26969, 651, 354, 9, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[27360, 665, 110, 1, 70, "Subsection"],
Cell[27473, 668, 495, 10, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[28005, 683, 109, 1, 70, "Subsection"],
Cell[28117, 686, 474, 8, 70, "Text"],
Cell[28594, 696, 4703, 113, 70, "Input"],
Cell[33300, 811, 145, 1, 70, "Text"],
Cell[33448, 814, 1004, 25, 70, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[34489, 844, 157, 2, 70, "Subsection"],
Cell[34649, 848, 479, 8, 70, "Text"],
Cell[35131, 858, 3394, 78, 70, "Input"],
Cell[38528, 938, 195, 2, 70, "Text"],
Cell[38726, 942, 1126, 26, 70, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[39889, 973, 107, 1, 70, "Subsection"],
Cell[39999, 976, 305, 5, 70, "Text"],
Cell[40307, 983, 109, 1, 70, "Text"],
Cell[40419, 986, 654, 10, 70, "Input"],
Cell[41076, 998, 329, 6, 70, "Text"],
Cell[41408, 1006, 463, 7, 70, "Input"],
Cell[41874, 1015, 120, 1, 70, "Text"],
Cell[41997, 1018, 145, 3, 70, "Input"],
Cell[42145, 1023, 217, 4, 70, "Text"],
Cell[42365, 1029, 213, 5, 70, "Input"],
Cell[42581, 1036, 116, 1, 70, "Text"],
Cell[42700, 1039, 275, 6, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[43012, 1050, 107, 1, 70, "Subsection"],
Cell[43122, 1053, 266, 5, 70, "Text"],
Cell[43391, 1060, 394, 9, 70, "Input"],
Cell[43788, 1071, 548, 9, 70, "Text"],
Cell[44339, 1082, 16145, 348, 70, "Input"],
Cell[60487, 1432, 207, 4, 70, "Text"],
Cell[60697, 1438, 3350, 48, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[64084, 1491, 101, 1, 70, "Subsection"],
Cell[64188, 1494, 97, 1, 70, "Text"],
Cell[64288, 1497, 694, 16, 70, "Input"],
Cell[64985, 1515, 107, 1, 70, "Text"],
Cell[65095, 1518, 286, 6, 70, "Input"],
Cell[65384, 1526, 105, 1, 70, "Text"],
Cell[65492, 1529, 501, 13, 70, "Input"],
Cell[65996, 1544, 105, 1, 70, "Text"],
Cell[66104, 1547, 547, 13, 70, "Input"],
Cell[66654, 1562, 104, 1, 70, "Text"],
Cell[66761, 1565, 496, 13, 70, "Input"]
}, Closed]],
Cell[CellGroupData[{
Cell[67294, 1583, 111, 1, 70, "Subsection"],
Cell[67408, 1586, 756, 13, 70, "Text"],
Cell[68167, 1601, 606, 14, 70, "Input"],
Cell[68776, 1617, 97, 1, 70, "Text"],
Cell[68876, 1620, 221, 6, 70, "Input"],
Cell[69100, 1628, 116, 1, 70, "Text"],
Cell[69219, 1631, 1057, 23, 70, "Input"],
Cell[70279, 1656, 118, 1, 70, "Text"],
Cell[70400, 1659, 1101, 25, 70, "Input"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[71550, 1690, 154, 2, 56, "Section"],
Cell[CellGroupData[{
Cell[71729, 1696, 95, 1, 70, "Subsection"],
Cell[71827, 1699, 3219, 69, 70, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[75083, 1773, 98, 1, 70, "Subsection"],
Cell[75184, 1776, 600, 14, 70, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[75821, 1795, 100, 1, 70, "Subsection"],
Cell[75924, 1798, 120, 1, 70, "Text"],
Cell[76047, 1801, 8951, 223, 70, "Input"],
Cell[85001, 2026, 116, 1, 70, "Text"],
Cell[85120, 2029, 8646, 219, 70, "Input"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[93815, 2254, 98, 1, 56, "Section"],
Cell[93916, 2257, 189, 2, 30, "Text"],
Cell[94108, 2261, 4547, 100, 601, "Input"]
}, Closed]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)

